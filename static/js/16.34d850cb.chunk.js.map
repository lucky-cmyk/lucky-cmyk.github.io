{"version":3,"sources":["pages/Role/components/CreateRole.js","pages/Role/components/UpdateRole.js","pages/Role/components/ListTable.js","pages/Role/index.js","api/acount.js","../node_modules/antd/es/popconfirm/style/index.js","../node_modules/antd/es/popover/style/index.js","../node_modules/antd/es/popconfirm/index.js","../node_modules/antd/es/_util/getRenderPropValue.js","api/role.js"],"names":["Option","TextArea","CreateRole","props","onCancel","visible","onOk","perms","users","useForm","form","useState","perm_ids","set_perm_ids","submit","a","validateFields","then","role_create","getFieldsValue","permissions_ids","toString","user_ids","getFieldValue","resetFields","setCheckedKeys","message","success","e","console","error","expandedKeys","setExpandedKeys","checkedKeys","selectedKeys","setSelectedKeys","autoExpandParent","setAutoExpandParent","title","labelCol","span","wrapperCol","name","hideRequiredMark","Item","label","rules","required","placeholder","checkable","onExpand","expandedKeysValue","onCheck","checkedKeysValue","concat","halfCheckedKeys","onSelect","selectedKeysValue","info","treeData","style","width","mode","map","item","value","id","uname","memo","remarks","set_checkusers","role_update","get_role_by_user_h","get_role_by_user","role_id","data","setFieldsValue","permissions_get_role_h","permissions_get_role","keys","trans_tree_get_key","key","children","check","checkState","submit_keys","trans_tree_get_all_key","useEffect","ListTable","ref","handleEdit","loading","setLoading","setData","modifypassword_h","modifyaccountRole_h","block_h","pageSize","total","showTotal","current","pagination","setPagination","delete_h","role_delete","role_get_handle","columns","dataIndex","render","text","record","size","onClick","onConfirm","okText","cancelText","useImperativeHandle","getData","newVal","params","role_get","page","page_size","length","get_id_user","get_by_user_nam","ids_names_data","ids_names","repacle_id_user_name","trans_key","count","rowKey","bordered","dataSource","onChange","forwardRef","Index","create_visible","set_create_visible","update_visible","set_update_visible","set_id","role_name","set_role_name","set_remarks","set_perms","set_users","childRef","useRef","appidList","useSelector","state","appids","trans_tree","options","arr","push","permissions_get_h","permissions_get","perms_data","get_user_all","account_get","Page","route","type","dashed","set_role_info","UpdateRole","accrount_create","http","post","get","password_update","put","upload_block","update_role","getAccountLog","uid","axios","_this","__rest","s","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","propertyIsEnumerable","Popconfirm","React","getPrefixCls","ConfigContext","_useMergedState","useMergedState","defaultValue","defaultVisible","_useMergedState2","_slicedToArray","setVisible","settingVisible","_a","onVisibleChange","close","customizePrefixCls","prefixCls","placement","overlayClassName","restProps","prefixClsConfirm","overlayClassNames","classNames","overlay","LocaleReceiver","componentName","defaultLocale","popconfirmLocale","okButtonProps","cancelButtonProps","okType","icon","className","getRenderPropValue","Button","_extends","ActionButton","buttonProps","convertLegacyProps","actionFn","quitOnNullishReturnValue","emitEvent","renderOverlay","rootPrefixCls","Tooltip","disabled","transitionName","getTransitionName","cloneElement","onKeyDown","_b","keyCode","KeyCode","ESC","_onKeyDown","defaultProps","trigger","ExclamationCircleFilled","propValue","delete","jpost"],"mappings":"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","file":"static/js/16.34d850cb.chunk.js","sourcesContent":["import React,{ memo, useState, useEffect } from \"react\";\r\nimport {\r\n  Modal,\r\n  Form,\r\n  Input,\r\n  Select,\r\n  Button,\r\n  Space,\r\n  Row,\r\n  Col,\r\n  message,\r\n} from \"antd\";\r\nimport { Tree } from \"antd\";\r\nimport { accrount_create } from \"../../../api/acount\";\r\nimport { role_create } from \"../../../api/role\";\r\nconst { Option } = Select;\r\nconst { TextArea } = Input;\r\nconst CreateRole = (props) => {\r\n  const { onCancel, visible, onOk, perms, users } = props;\r\n  const [form] = Form.useForm();\r\n  const [perm_ids, set_perm_ids] = useState([]);\r\n  //提交\r\n  const submit = async () => {\r\n    // console.log(form.getFieldsValue());\r\n    try {\r\n      form.validateFields().then(async () => {\r\n        await role_create({\r\n          ...form.getFieldsValue(),\r\n          permissions_ids: perm_ids.toString(),\r\n          user_ids: form.getFieldValue(\"user_ids\")?.toString(),\r\n        });\r\n        form.resetFields();\r\n        setCheckedKeys([]);\r\n        message.success(\"创建成功\");\r\n        onOk();\r\n      });\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n  const FormConfig = {\r\n    labelCol: { span: 6 },\r\n    wrapperCol: { span: 18 },\r\n  };\r\n\r\n  const [expandedKeys, setExpandedKeys] = useState([\"\"]);\r\n  const [checkedKeys, setCheckedKeys] = useState([\"\"]);\r\n  const [selectedKeys, setSelectedKeys] = useState([]);\r\n  const [autoExpandParent, setAutoExpandParent] = useState(true);\r\n\r\n  const onExpand = (expandedKeysValue) => {\r\n    // console.log(\"onExpand\", expandedKeysValue); // if not set autoExpandParent to false, if children expanded, parent can not collapse.\r\n    // or, you can remove all expanded children keys.\r\n\r\n    setExpandedKeys(expandedKeysValue);\r\n    setAutoExpandParent(false);\r\n  };\r\n\r\n  const onCheck = (checkedKeysValue, e) => {\r\n    // console.log(\"onCheck\", checkedKeysValue, e);\r\n    set_perm_ids(checkedKeysValue.concat(e.halfCheckedKeys));\r\n    setCheckedKeys(checkedKeysValue);\r\n  };\r\n\r\n  const onSelect = (selectedKeysValue, info) => {\r\n    // console.log(\"onSelect\", info);\r\n    setSelectedKeys(selectedKeysValue);\r\n  };\r\n  const on_cancel = () => {\r\n    form.resetFields();\r\n    setCheckedKeys([]);\r\n    onCancel();\r\n  };\r\n  return (\r\n    <Modal\r\n      title=\"创建角色\"\r\n      visible={visible}\r\n      onCancel={on_cancel}\r\n      onOk={submit}\r\n    >\r\n      <Form\r\n        {...FormConfig}\r\n        form={form}\r\n        name=\"form_in_modal\"\r\n        hideRequiredMark={true}\r\n      >\r\n        <Form.Item\r\n          label=\"角色名\"\r\n          name=\"name\"\r\n          rules={[{ required: true, message: \"请输入角色名\" }]}\r\n        >\r\n          <Input placeholder=\"请输入角色名\" />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"备注\"\r\n          name=\"remarks\"\r\n          rules={[{ required: true, message: \"请输入备注\" }]}\r\n        >\r\n          <TextArea placeholder=\"请输入备注\" />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"权限\" name=\"permissions_ids\">\r\n          <Tree\r\n            checkable\r\n            onExpand={onExpand}\r\n            expandedKeys={expandedKeys}\r\n            autoExpandParent={autoExpandParent}\r\n            onCheck={onCheck}\r\n            checkedKeys={checkedKeys}\r\n            onSelect={onSelect}\r\n            selectedKeys={selectedKeys}\r\n            treeData={perms}\r\n          />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"所属用户\"\r\n          name=\"user_ids\"\r\n        >\r\n          <Select\r\n            style={{ width: \"100%\" }}\r\n            placeholder=\"请选择用户\"\r\n            mode=\"multiple\"\r\n          >\r\n            {users.map((item) => (\r\n              <Option key={item.id} value={item.id}>\r\n                {item.uname}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\nexport default memo(CreateRole);\r\n","import React,{ memo, useState, useEffect } from \"react\";\r\nimport {\r\n  Modal,\r\n  Form,\r\n  Input,\r\n  Select,\r\n  Button,\r\n  Space,\r\n  Row,\r\n  Col,\r\n  message,\r\n} from \"antd\";\r\nimport { Tree } from \"antd\";\r\nimport { accrount_create } from \"../../../api/acount\";\r\nimport {\r\n  role_create,\r\n  role_update,\r\n  get_role_by_user,\r\n  permissions_get_role,\r\n} from \"../../../api/role\";\r\nimport { trans_tree_get_all_key, trans_tree_get_key } from \"../../../utils\";\r\nconst { Option } = Select;\r\nconst { TextArea } = Input;\r\nconst CreateRole = (props) => {\r\n  const { onCancel, visible, onOk, perms, users, name, id, remarks } = props;\r\n  const [form] = Form.useForm();\r\n  const [perm_ids, set_perm_ids] = useState([]);\r\n  const [checkusers, set_checkusers] = useState([]); //角色选中用户\r\n  //提交\r\n  const submit = async () => {\r\n    // console.log(form.getFieldsValue());\r\n    try {\r\n      form.validateFields().then(async () => {\r\n        await role_update({\r\n          ...form.getFieldsValue(),\r\n          permissions_ids: perm_ids.toString(),\r\n          user_ids: form.getFieldValue(\"user_ids\")?.toString(),\r\n          id,\r\n        });\r\n        form.resetFields();\r\n        setCheckedKeys([]);\r\n        message.success(\"修改成功\");\r\n        onOk();\r\n      });\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n  const FormConfig = {\r\n    labelCol: { span: 6 },\r\n    wrapperCol: { span: 18 },\r\n  };\r\n\r\n  const [expandedKeys, setExpandedKeys] = useState([\"\"]);\r\n  const [checkedKeys, setCheckedKeys] = useState([\"\"]);\r\n  const [selectedKeys, setSelectedKeys] = useState([]);\r\n  const [autoExpandParent, setAutoExpandParent] = useState(true);\r\n\r\n  const onExpand = (expandedKeysValue) => {\r\n    // console.log(\"onExpand\", expandedKeysValue); // if not set autoExpandParent to false, if children expanded, parent can not collapse.\r\n    // or, you can remove all expanded children keys.\r\n\r\n    setExpandedKeys(expandedKeysValue);\r\n    setAutoExpandParent(false);\r\n  };\r\n\r\n  const onCheck = (checkedKeysValue, e) => {\r\n    // console.log(\"onCheck\", checkedKeysValue, e);\r\n    set_perm_ids(checkedKeysValue.concat(e.halfCheckedKeys));\r\n    setCheckedKeys(checkedKeysValue);\r\n  };\r\n\r\n  const onSelect = (selectedKeysValue, info) => {\r\n    // console.log(\"onSelect\", info);\r\n    setSelectedKeys(selectedKeysValue);\r\n  };\r\n  const on_cancel = () => {\r\n    form.resetFields();\r\n    onCancel();\r\n  };\r\n  //获取角色下面用户\r\n  const get_role_by_user_h = async () => {\r\n    const data = await get_role_by_user({ role_id: id });\r\n    const users = data.data;\r\n    // console.log(users)\r\n    set_checkusers(users);\r\n    form.setFieldsValue({\r\n      user_ids: users,\r\n    });\r\n  };\r\n  //获取角色的权限\r\n  const permissions_get_role_h = async () => {\r\n    let data = await permissions_get_role({ role_id: id });\r\n    // console.log(data);\r\n    const keys = trans_tree_get_key(data.data, {\r\n      key: \"id\",\r\n      title: \"name\",\r\n      children: \"child\",\r\n      check: \"check\",\r\n      checkState: true,\r\n    });\r\n    setCheckedKeys(keys);\r\n    const submit_keys = trans_tree_get_all_key(data.data, {\r\n      key: \"id\",\r\n      title: \"name\",\r\n      children: \"child\",\r\n      check: \"check\",\r\n      checkState: true,\r\n    });\r\n    // console.log(submit_keys,keys)\r\n    set_perm_ids(submit_keys);\r\n  };\r\n  useEffect(() => {\r\n    if (visible) {\r\n      form.setFieldsValue({\r\n        name,\r\n        remarks,\r\n      });\r\n      get_role_by_user_h();\r\n      permissions_get_role_h();\r\n    }\r\n  }, [visible]);\r\n  return (\r\n    <Modal\r\n      title=\"修改角色\"\r\n      visible={visible}\r\n      onCancel={on_cancel}\r\n      onOk={submit}\r\n    >\r\n      <Form\r\n        {...FormConfig}\r\n        form={form}\r\n        name=\"form_in_modal\"\r\n        hideRequiredMark={true}\r\n      >\r\n        <Form.Item\r\n          label=\"角色名\"\r\n          name=\"name\"\r\n          rules={[{ required: true, message: \"请输入角色名\" }]}\r\n        >\r\n          <Input placeholder=\"请输入角色名\" />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"备注\"\r\n          name=\"remarks\"\r\n          rules={[{ required: true, message: \"请输入备注\" }]}\r\n        >\r\n          <TextArea placeholder=\"请输入备注\" />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"权限\" name=\"permissions_ids\">\r\n          <Tree\r\n            checkable\r\n            onExpand={onExpand}\r\n            expandedKeys={expandedKeys}\r\n            autoExpandParent={autoExpandParent}\r\n            onCheck={onCheck}\r\n            checkedKeys={checkedKeys}\r\n            onSelect={onSelect}\r\n            selectedKeys={selectedKeys}\r\n            treeData={perms}\r\n          />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"所属用户\"\r\n          name=\"user_ids\"\r\n        >\r\n          <Select\r\n            style={{ width: \"100%\" }}\r\n            placeholder=\"请选择用户\"\r\n            mode=\"multiple\"\r\n          >\r\n            {users.map((item) => (\r\n              <Option key={item.id} value={item.id}>\r\n                {item.uname}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\nexport default memo(CreateRole);\r\n","import React, {\r\n  useEffect,\r\n  useState,\r\n  useImperativeHandle,\r\n  forwardRef,\r\n} from \"react\";\r\nimport { Table, Button, Space, Popconfirm, message } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\nimport { mock } from \"@/api/mock\";\r\nimport { role_delete, role_get } from \"../../../api/role\";\r\nimport getAttrFormArr, { get_id_user, repacle_id_user_name } from \"../../../utils\";\r\nimport { get_user_name } from \"../../../api/common\";\r\nimport { get_by_user_nam } from \"../../../api/acount\";\r\n// import mock from ''\r\nconst ListTable = (props, ref) => {\r\n  const { handleEdit } = props;\r\n  const [loading, setLoading] = useState(false);\r\n  const [data, setData] = useState([]);\r\n\r\n  const {\r\n    modifypassword_h,\r\n    modifyaccountRole_h,\r\n    block_h,\r\n    pageSize = 5,\r\n    total = 20,\r\n    showTotal = true,\r\n  } = props;\r\n  const [pagination, setPagination] = useState({\r\n    current: 1,\r\n    pageSize: pageSize || 0,\r\n    total: total || 0,\r\n  });\r\n  //删除角色\r\n  const delete_h = async (id) => {\r\n    try {\r\n      await role_delete({ id });\r\n      message.success(\"删除成功\");\r\n      if  ( (pagination.total - 1) / pagination.pageSize < pagination.current &&\r\n  pagination.current != 1) {\r\n        setPagination({\r\n          ...pagination,\r\n          current: pagination.current - 1,\r\n        });\r\n      }else{\r\n        role_get_handle();\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n  const columns = [\r\n    { title: \"角色名称\", dataIndex: \"name\", key: \"id\" },\r\n    { title: \"角色说明\", dataIndex: \"remarks\" },\r\n    // { title: \"角色状态\", dataIndex: \"title\" },\r\n    {\r\n      title: \"创建时间\",\r\n      dataIndex: \"created_at\",\r\n    },\r\n    { title: \"创建人\", dataIndex: \"create_user_name\" },\r\n    {\r\n      title: \"操作\",\r\n      dataIndex: \"disabled\",\r\n      render: (text, record) => (\r\n        <Space size=\"middle\">\r\n          <a onClick={() => handleEdit(record.name, record.id, record.remarks)}>\r\n            编辑\r\n          </a>\r\n          <Popconfirm\r\n            title=\"确定删除这条数据?\"\r\n            onConfirm={() => delete_h(record.id)}\r\n            okText=\"Yes\"\r\n            cancelText=\"No\"\r\n          >\r\n            <a>删除</a>\r\n          </Popconfirm>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n  useImperativeHandle(ref, () => ({\r\n    // changeVal 就是暴露给父组件的方法\r\n    getData: (newVal) => {\r\n      role_get_handle(newVal);\r\n    },\r\n  }));\r\n  //获取角色列表\r\n  const role_get_handle = async (params = {}) => {\r\n    try {\r\n      setLoading(true);\r\n      let data = await role_get({\r\n        page: pagination.current,\r\n        page_size: pagination.pageSize,\r\n        ...params,\r\n      });\r\n      // const ids = getAttrFormArr(data, \"id\");\r\n\r\n      // const arr = await get_user_name({ user_ids: ids.toString() });\r\n      // console.log(data)\r\n      // console.log(data);\r\n      if(data.data.length>0){\r\n        const user_ids = get_id_user(data.data, { key: \"create_user\" });\r\n        const ids_names_data = await get_by_user_nam({\r\n          user_ids: user_ids.toString(),\r\n        });\r\n        let ids_names = ids_names_data.data;\r\n        data.data = repacle_id_user_name(data.data, {\r\n          key: \"create_user\",\r\n          data: ids_names,\r\n          trans_key: \"create_user_name\",\r\n        });\r\n      }\r\n    \r\n      setData(data.data);\r\n      setLoading(false);\r\n      setPagination({\r\n        ...pagination,\r\n        total: data.page.count,\r\n        pageSize: data.page.page_size,\r\n      });\r\n    } catch (e) {\r\n      setLoading(false);\r\n      console.error(e);\r\n    }\r\n  };\r\n  useEffect(async () => {\r\n    role_get_handle();\r\n  }, [pagination.current]);\r\n  //表格改变触发\r\n  const onchange = (pagination) => {\r\n    // console.log(pagination);\r\n    setPagination({ ...pagination });\r\n  };\r\n  return (\r\n    <>\r\n      <Table\r\n        rowKey=\"id\"\r\n        bordered\r\n        loading={loading}\r\n        columns={columns}\r\n        dataSource={data}\r\n        pagination={pagination}\r\n        onChange={onchange}\r\n      ></Table>\r\n    </>\r\n  );\r\n};\r\nexport default forwardRef(ListTable);\r\n","/*\r\n * @Description: 角色管理\r\n * @Author: luck-cmyk\r\n */\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Table, Button, Popconfirm, Space, message, Divider } from \"antd\";\r\nimport Page from \"../../components/Page\";\r\nimport dayjs from \"dayjs\";\r\nimport CreateRole from \"./components/CreateRole\";\r\nimport UpdateRole from \"./components/UpdateRole\";\r\nimport ListTable from \"./components/ListTable\";\r\nimport { permissions_get } from \"../../api/role\";\r\nimport { account_get } from \"../../api/acount\";\r\nfunction Index(props) {\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [visible, setVisible] = useState(false);\r\n  const [fromData, setFromData] = useState([]);\r\n  const [curAppid, setAppid] = useState();\r\n  const [create_visible, set_create_visible] = useState(false);\r\n  const [update_visible, set_update_visible] = useState(false);\r\n  const [id, set_id] = useState(\"\");\r\n  const [role_name, set_role_name] = useState(\"\");\r\n  const [remarks, set_remarks] = useState(\"\");\r\n  const [perms, set_perms] = useState(\"\");\r\n  const [users, set_users] = useState([]);\r\n  const childRef = useRef();\r\n  const appidList = useSelector((state) => state.appids);\r\n  const getDataByAppid = async (appid) => {\r\n    setAppid(appid);\r\n    setLoading(true);\r\n    console.log(\"公告数据：\", data);\r\n    const dataSource = data.map((data, index) => {\r\n      return {\r\n        ...data,\r\n        key: data.id,\r\n      };\r\n    });\r\n    setLoading(false);\r\n    setData(dataSource);\r\n  };\r\n\r\n  const edit = (record, index) => {\r\n    let d = {\r\n      ...record,\r\n      time: [dayjs.unix(record.start_time), dayjs.unix(record.end_time)],\r\n    };\r\n    // console.log('编辑表单', d);\r\n    setFromData(d);\r\n    setVisible(true);\r\n  };\r\n\r\n  useEffect(() => {}, [appidList]);\r\n  //设置角色信息\r\n  const set_role_info = (name, id, remarks) => {\r\n    set_role_name(name);\r\n    set_id(id);\r\n    set_remarks(remarks);\r\n  };\r\n  //创建角色\r\n  const handleAdd = () => {\r\n    set_create_visible(true);\r\n  };\r\n\r\n  //创建角色关闭\r\n  const create_cancel = () => {\r\n    set_create_visible(false);\r\n  };\r\n  //编辑角色\r\n  const handleEdit = (name, id, remarks) => {\r\n    set_role_info(name, id, remarks);\r\n    set_update_visible(true);\r\n  };\r\n  //编辑角色取消\r\n  const update_cancel = () => {\r\n    set_update_visible(false);\r\n  };\r\n  //编辑角色成功\r\n  const update_ok = () => {\r\n    childRef.current.getData();\r\n    set_update_visible(false);\r\n  };\r\n  //创建角色成功\r\n  const create_ok = () => {\r\n    childRef.current.getData();\r\n    set_create_visible(false);\r\n  };\r\n  //转换key值\r\n  const trans_tree = (data, options) => {\r\n    let arr = [];\r\n    const { key, title, children } = options;\r\n    data.map((item) => {\r\n      arr.push({\r\n        key: item[key],\r\n        title: item[title],\r\n        children: item[children] ? trans_tree(item[children], options) : [],\r\n      });\r\n    });\r\n    return arr;\r\n  };\r\n  //获取所有权限列表\r\n  const permissions_get_h = async () => {\r\n    try {\r\n      let data = await permissions_get();\r\n\r\n      const perms_data = trans_tree(data.data, {\r\n        key: \"id\",\r\n        title: \"name\",\r\n        children: \"child\",\r\n      });\r\n      set_perms(perms_data);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n  //获取用户列表\r\n  const get_user_all = async () => {\r\n    let data = await account_get({\r\n      page: 1,\r\n      page_size: 10000,\r\n    });\r\n    set_users(data.data);\r\n  };\r\n  useEffect(() => {\r\n    permissions_get_h();\r\n    get_user_all();\r\n  }, []);\r\n  return (\r\n    <Page title={props.route.title}>\r\n      {/* <Space direction=\"vertical\"> */}\r\n      <Space>\r\n        <Button type=\"primary\" onClick={handleAdd}>\r\n          创建角色\r\n        </Button>\r\n      </Space>\r\n      <Divider dashed />\r\n      <ListTable ref={childRef} handleEdit={handleEdit} />\r\n      {/* </Space> */}\r\n      <CreateRole\r\n        onOk={create_ok}\r\n        visible={create_visible}\r\n        onCancel={create_cancel}\r\n        perms={perms}\r\n        users={users}\r\n      />\r\n      <UpdateRole\r\n        perms={perms}\r\n        users={users}\r\n        id={id}\r\n        name={role_name}\r\n        remarks={remarks}\r\n        visible={update_visible}\r\n        onOk={update_ok}\r\n        onCancel={update_cancel}\r\n      />\r\n    </Page>\r\n  );\r\n}\r\nexport default Index;\r\n","import http from \"utils/http\";\r\nimport axios from \"../utils/axios\";\r\nexport const mock = async (params) => {\r\n  let data = await http.get(`/mock`, { params });\r\n\r\n  return data?.data;\r\n};\r\n//新增账号\r\nexport const accrount_create = async (params) => {\r\n  return await http.post(`/admin/user-web/create`, params);\r\n};\r\n\r\n//获取账号列表\r\nexport const account_get = async (params) => {\r\n  return http.get(`/admin/user-web/gets`, params);\r\n};\r\n//修改密码\r\nexport const password_update = async (params) => {\r\n  return await http.put(`/admin/user-web/update-password`, params);\r\n};\r\n//封停/解封\r\nexport const upload_block = async (params) => {\r\n  return http.put(`/admin/user-web/update-block`, params);\r\n};\r\n\r\n//修改角色\r\nexport const update_role = async (params) => {\r\n  return http.put(`/admin/user-web/update-role`, params);\r\n};\r\n\r\n//获取用户名称\r\nexport const get_by_user_nam = async (params) => {\r\n  return http.get(`/admin/component/gets-by-user-name`, params);\r\n};\r\n\r\nexport const getAccountLog = async (uid, params) => {\r\n  let data = await axios.get(`/users/${uid}/accountLog`, {params});\r\n  return data?.data\r\n};\r\n","import '../../style/default.less'; // style dependencies\n// deps-lint-skip: tooltip, popover\n\nimport '../../popover/style';\nimport '../../button/style';\nimport './index.less';","import '../../style/default.less';\nimport './index.less'; // style dependencies\n// deps-lint-skip: tooltip","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this;\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport ExclamationCircleFilled from \"@ant-design/icons/es/icons/ExclamationCircleFilled\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport Tooltip from '../tooltip';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/button';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport defaultLocale from '../locale/default';\nimport { ConfigContext } from '../config-provider';\nimport { getRenderPropValue } from '../_util/getRenderPropValue';\nimport { cloneElement } from '../_util/reactNode';\nimport { getTransitionName } from '../_util/motion';\nimport ActionButton from '../_util/ActionButton';\nvar Popconfirm = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls;\n\n  var _useMergedState = useMergedState(false, {\n    value: props.visible,\n    defaultValue: props.defaultVisible\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      visible = _useMergedState2[0],\n      setVisible = _useMergedState2[1];\n\n  var settingVisible = function settingVisible(value, e) {\n    var _a;\n\n    setVisible(value);\n    (_a = props.onVisibleChange) === null || _a === void 0 ? void 0 : _a.call(props, value, e);\n  };\n\n  var close = function close(e) {\n    settingVisible(false, e);\n  };\n\n  var onConfirm = function onConfirm(e) {\n    var _a;\n\n    return (_a = props.onConfirm) === null || _a === void 0 ? void 0 : _a.call(_this, e);\n  };\n\n  var onCancel = function onCancel(e) {\n    var _a;\n\n    settingVisible(false, e);\n    (_a = props.onCancel) === null || _a === void 0 ? void 0 : _a.call(_this, e);\n  };\n\n  var _onKeyDown = function onKeyDown(e) {\n    if (e.keyCode === KeyCode.ESC && visible) {\n      settingVisible(false, e);\n    }\n  };\n\n  var onVisibleChange = function onVisibleChange(value) {\n    var disabled = props.disabled;\n\n    if (disabled) {\n      return;\n    }\n\n    settingVisible(value);\n  };\n\n  var renderOverlay = function renderOverlay(prefixCls, popconfirmLocale) {\n    var okButtonProps = props.okButtonProps,\n        cancelButtonProps = props.cancelButtonProps,\n        title = props.title,\n        cancelText = props.cancelText,\n        okText = props.okText,\n        okType = props.okType,\n        icon = props.icon;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-inner-content\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-message\")\n    }, icon, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-message-title\")\n    }, getRenderPropValue(title))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-buttons\")\n    }, /*#__PURE__*/React.createElement(Button, _extends({\n      onClick: onCancel,\n      size: \"small\"\n    }, cancelButtonProps), cancelText || popconfirmLocale.cancelText), /*#__PURE__*/React.createElement(ActionButton, {\n      buttonProps: _extends(_extends({\n        size: 'small'\n      }, convertLegacyProps(okType)), okButtonProps),\n      actionFn: onConfirm,\n      close: close,\n      prefixCls: getPrefixCls('btn'),\n      quitOnNullishReturnValue: true,\n      emitEvent: true\n    }, okText || popconfirmLocale.okText)));\n  };\n\n  var customizePrefixCls = props.prefixCls,\n      placement = props.placement,\n      children = props.children,\n      overlayClassName = props.overlayClassName,\n      restProps = __rest(props, [\"prefixCls\", \"placement\", \"children\", \"overlayClassName\"]);\n\n  var prefixCls = getPrefixCls('popover', customizePrefixCls);\n  var prefixClsConfirm = getPrefixCls('popconfirm', customizePrefixCls);\n  var overlayClassNames = classNames(prefixClsConfirm, overlayClassName);\n  var overlay = /*#__PURE__*/React.createElement(LocaleReceiver, {\n    componentName: \"Popconfirm\",\n    defaultLocale: defaultLocale.Popconfirm\n  }, function (popconfirmLocale) {\n    return renderOverlay(prefixCls, popconfirmLocale);\n  });\n  var rootPrefixCls = getPrefixCls();\n  return /*#__PURE__*/React.createElement(Tooltip, _extends({}, restProps, {\n    prefixCls: prefixCls,\n    placement: placement,\n    onVisibleChange: onVisibleChange,\n    visible: visible,\n    overlay: overlay,\n    overlayClassName: overlayClassNames,\n    ref: ref,\n    transitionName: getTransitionName(rootPrefixCls, 'zoom-big', props.transitionName)\n  }), cloneElement(children, {\n    onKeyDown: function onKeyDown(e) {\n      var _a, _b;\n\n      if ( /*#__PURE__*/React.isValidElement(children)) {\n        (_b = children === null || children === void 0 ? void 0 : (_a = children.props).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n      }\n\n      _onKeyDown(e);\n    }\n  }));\n});\nPopconfirm.defaultProps = {\n  placement: 'top',\n  trigger: 'click',\n  okType: 'primary',\n  icon: /*#__PURE__*/React.createElement(ExclamationCircleFilled, null),\n  disabled: false\n};\nexport default Popconfirm;","export var getRenderPropValue = function getRenderPropValue(propValue) {\n  if (!propValue) {\n    return null;\n  }\n\n  var isRenderFunction = typeof propValue === 'function';\n\n  if (isRenderFunction) {\n    return propValue();\n  }\n\n  return propValue;\n};","import axios from \"utils/http\";\r\n\r\n//获取角色列表\r\nexport const role_get = (params) => {\r\n  return axios.get(`/admin/role/gets`, params);\r\n};\r\n//删除角色\r\nexport const role_delete = (params) => {\r\n  return axios.delete(`/admin/role/delete`, params);\r\n};\r\n//新增角色\r\nexport const role_create = (params) => {\r\n  return axios.jpost(`/admin/role/create`, params);\r\n};\r\n//修改角色\r\nexport const role_update = (params) => {\r\n  return axios.put(`/admin/role/update`, params);\r\n};\r\n//获取所有权限\r\nexport const permissions_get = (params) => {\r\n  return axios.get(`/admin/permissions/gets`, params);\r\n};\r\n//获取所有权限\r\nexport const permissions_get_role = (params) => {\r\n  return axios.get(`/admin/role/get-permissions`, params);\r\n};\r\n//获取角色下面的用户\r\nexport const get_role_by_user = (params) => {\r\n  return axios.get(`/admin/role/get-role-by-user`, params);\r\n};\r\n"],"sourceRoot":""}