{"version":3,"sources":["pages/RobotUser/components/ListTable.js","pages/RobotUser/components/UpdateAvatar.js","pages/RobotUser/index.js","api/room.js","api/acount.js","utils/crypto.js","utils/storageUtil.js","utils/aws.js","utils/format.js","utils/columnSearch.js","api/log.js","constants/ttypes.js"],"names":["ListTable","props","ref","useImperativeHandle","getData","newVal","room_get_handle","update_room_h","pageSize","total","setUploadAvatarState_h","showTotal","useState","loading","setLoading","data","setData","current","pagination","setPagination","formatGameRange","ttypeKey","gameRange","split","ttypes","formatCash","columns","title","dataIndex","key","sorter","width","fixed","getColumnSearchProps","render","_","record","to","uid","editable","uname","pic","size","src","formatUrl","onClick","visible","id","asset","deposit","withdrawable","filters","res","player","difen","poolDifen","i","p","d","push","text","value","allTtypeFilters","robot_status","status","style","onConfirm","okText","cancelText","a","params","room_get","page","page_size","count","console","error","useEffect","bordered","dataSource","scroll","x","rowKey","onChange","forwardRef","UpdateRoom","imageUrl","setImageUrl","setPath","onCancel","onOk","useForm","form","session","useSelector","state","submit","validateFields","then","room_update","getFieldsValue","resetFields","message","success","e","uploadButton","LoadingOutlined","PlusOutlined","className","name","listType","showUploadList","action","process","headers","token","info","log","file","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","getBase64","originFileObj","response","alt","memo","Index","appidList","appids","set_create_visible","set_update_visible","UploadAvatarState","setUploadAvatarState","childRef","useRef","handleAdd","Page","route","type","min","step","dashed","obj","UpdateAvatar","axios","get","room_add","post","put","room_del","delete","discard_config_create","jpost","discard_config_get","discard_config_update","dropcard_config_create","dropcard_config_get","dropcard_config_update","room_config_get","room_config_set","room_config_add","room_config_update","room_pool_rules_config_create","room_pool_rules_config_update","room_pool_rules_config_get","room_pool_rules_config_set_status","room_money_pool_create","room_money_pool_get","room_money_pool_update","personal_adjust_cond_config_delete","personal_adjust_cond_config_create","personal_adjust_cond_config_update","personal_adjust_cond_config_get","personal_adjust_cond_config_get_all","personal_adjust_cd_config_create","personal_adjust_cd_config_update","personal_adjust_cd_config_get","personal_adjust_rules_config_create","personal_adjust_rules_config_update","personal_adjust_rules_config_set_status","personal_adjust_rules_config_get","accrount_create","http","account_get","password_update","upload_block","update_role","get_by_user_nam","getAccountLog","cachePrefix","addSessionStorage","storeObj","item","tempArr","sessionStorage","indexOf","getItem","length","toFixed","removeItem","setItem","getSessionStorage","utc","require","dayjs","extend","AWS","store","getState","s3Enable","getAwsKey","resp","con","region","accessKeyId","access_key_id","secretAccessKey","secret_access_key","session_token","bucket","appName","app_name","acl","config","update","S3","downloadFromS3","fileName","appid","dir","acces","JSON","parse","stringify","credentials","sessionToken","Promise","resolve","_reject","Bucket","Key","getObject","Body","cdnUrl","substr","cash","formatTtype","ttype","toPercent","point","len","str","Number","formatUrlS3","picStor","suffer","lastIndexOf","encode","reduce","b","String","fromCharCode","btoa","replace","handleSearch","selectedKeys","confirm","filterDropdown","setSelectedKeys","clearFilters","padding","placeholder","target","onPressEnter","marginBottom","display","icon","filterIcon","filtered","color","undefined","account_log_get","role_log_get","game_log_get","ttypeArr"],"mappings":"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","file":"static/js/22.52555180.chunk.js","sourcesContent":["import { Table, Button, Space, Popconfirm, message, Avatar } from \"antd\";\r\nimport React, {\r\n  useEffect,\r\n  useState,\r\n  forwardRef,\r\n  useImperativeHandle,\r\n  Link,\r\n} from \"react\";\r\n\r\nimport dayjs from \"dayjs\";\r\nimport { mock } from \"@/api/mock\";\r\nimport { account_get, get_by_user_nam } from \"../../../api/acount\";\r\nimport { account_log_get, role_log_get } from \"../../../api/log\";\r\nimport { get_id_user, repacle_id_user_name } from \"../../../utils\";\r\nimport { room_del, room_get } from \"../../../api/room\";\r\nimport { formatCash, formatUrl } from \"../../../utils/format\";\r\nimport { getColumnSearchProps } from \"../../../utils/columnSearch\";\r\n// import mock from ''\r\nimport ttypes from \"./../../../constants/ttypes\";\r\nconst ListTable = (props, ref) => {\r\n  useImperativeHandle(ref, () => ({\r\n    // changeVal 就是暴露给父组件的方法\r\n    getData: (newVal) => {\r\n      room_get_handle(newVal);\r\n    },\r\n  }));\r\n  const {\r\n    update_room_h,\r\n    pageSize = 5,\r\n    total = 20,\r\n    showTotal = true,\r\n    setUploadAvatarState_h,\r\n  } = props;\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [data, setData] = useState([]);\r\n  const [pagination, setPagination] = useState({\r\n    current: 1,\r\n    pageSize: pageSize || 20,\r\n    total: total || 0,\r\n  });\r\n\r\n  const allTtypeFilters = () => {\r\n    const res = [];\r\n    const player = [0, 2, 6];\r\n    const difen = [\r\n      0, 1, 5, 10, 25, 50, 100, 200, 300, 500, 1000, 2000, 3000, 4000, 5000,\r\n      8000, 10000,\r\n    ];\r\n    const poolDifen = [\r\n      0, 2500, 5000, 10000, 25000, 50000, 100000, 200000, 300000,\r\n    ];\r\n    for (let i in ttypes) {\r\n      if (i == 2) continue;\r\n      for (let p of player) {\r\n        for (let d of difen) {\r\n          if (p === 0 && d !== 0) continue;\r\n          if (d === 0 && p !== 0) continue;\r\n\r\n          const key = i + \"_\" + p + \"_\" + d;\r\n          res.push({ text: formatGameRange(key), value: key });\r\n        }\r\n      }\r\n    }\r\n    for (let p of player) {\r\n      for (let d of poolDifen) {\r\n        if (p === 0 && d !== 0) continue;\r\n        if (d === 0 && p !== 0) continue;\r\n\r\n        const key = 2 + \"_\" + p + \"_\" + d;\r\n        res.push({ text: formatGameRange(key), value: key });\r\n      }\r\n    }\r\n    // }\r\n\r\n    return res;\r\n  };\r\n  const formatGameRange = (ttypeKey) => {\r\n    const gameRange = ttypeKey.split(\"_\");\r\n    if (gameRange[1] === \"0\") return ttypes[gameRange[0]] + \" - 练习场\";\r\n    return (\r\n      ttypes[gameRange[0]] +\r\n      \" - \" +\r\n      gameRange[1] +\r\n      \"人\" +\r\n      \" - \" +\r\n      formatCash(gameRange[2])\r\n    );\r\n  };\r\n  //删除房间列表\r\n  const delte_room_h = async (id) => {\r\n    try {\r\n      await room_del({ id });\r\n      message.success(\"删除成功\");\r\n      if  ( (pagination.total - 1) / pagination.pageSize < pagination.current &&\r\n  pagination.current != 1) {\r\n        setPagination({\r\n          ...pagination,\r\n          current: pagination.current - 1,\r\n        });\r\n      } else {\r\n        room_get_handle();\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n  let columns = [\r\n    {\r\n      title: \"序号\",\r\n      dataIndex: \"key\",\r\n      key: \"tr\",\r\n      sorter: true,\r\n      width: 100,\r\n      fixed: \"left\",\r\n    },\r\n\r\n    {\r\n      title: \"ID\",\r\n      dataIndex: \"uid\",\r\n      key: \"uid\",\r\n      width: 100,\r\n      sorter: true,\r\n      ...getColumnSearchProps(\"uid\"),\r\n      render: (_, record) => (\r\n        <Link to={`/user/userInfo?uid=${record.uid}`}>{record.uid}</Link>\r\n      ),\r\n    },\r\n    {\r\n      title: \"昵称\",\r\n      editable: true,\r\n      dataIndex: \"uname\",\r\n      ...getColumnSearchProps(\"uname\"),\r\n      render: (_, record) => record.uname,\r\n      key: \"uname\",\r\n    },\r\n    {\r\n      title: \"头像\",\r\n      dataIndex: \"pic\",\r\n      key: \"pic\",\r\n      render: (pic, record) => (\r\n        <>\r\n          <Avatar\r\n            size={64}\r\n            src={formatUrl(pic)}\r\n            onClick={() =>\r\n              setUploadAvatarState_h({ visible: true, id: record.id })\r\n            }\r\n          />\r\n        </>\r\n      ),\r\n    },\r\n\r\n    {\r\n      title: \"余额\",\r\n      key: \"asset\",\r\n      dataIndex: \"asset\",\r\n      sorter: true,\r\n      render: (asset) => (asset ? formatCash(asset) : 0),\r\n    },\r\n    {\r\n      title: \"deposit\",\r\n      dataIndex: \"deposit\",\r\n      key: \"deposit\",\r\n      editable: true,\r\n      sorter: true,\r\n      render: (_, record) => (record.deposit ? formatCash(record.deposit) : 0),\r\n    },\r\n    {\r\n      title: \"withdrawable\",\r\n      dataIndex: \"withdrawable\",\r\n      key: \"withdrawable\",\r\n      editable: true,\r\n      sorter: true,\r\n      render: (withdrawable) => (withdrawable ? formatCash(withdrawable) : 0),\r\n    },\r\n    {\r\n      title: \"匹配场次\",\r\n      dataIndex: \"ttype_key\",\r\n      key: \"ttype_key\",\r\n      editable: true,\r\n      filters: allTtypeFilters(),\r\n    },\r\n    {\r\n      title: \"匹配时段\",\r\n      dataIndex: \"timeRange\",\r\n      key: \"stime\",\r\n      editable: true,\r\n      sorter: true,\r\n    },\r\n    {\r\n      title: \"状态\",\r\n      dataIndex: \"status\",\r\n      key: \"status\",\r\n      editable: true,\r\n      render: (_, robot_status) => robot_status.status,\r\n      filters: [\r\n        { text: \"打开\", value: 0 },\r\n        { text: \"关闭\", value: 1 },\r\n      ],\r\n    },\r\n    { title: \"昨日场数\", dataIndex: \"yr\", key: \"yr\", sorter: true },\r\n    { title: \"昨日胜率\", dataIndex: \"r2\", key: \"r2\", sorter: true },\r\n    { title: \"昨日输赢\", dataIndex: \"yp\", key: \"yp\", sorter: true },\r\n    { title: \"今日场数\", dataIndex: \"tr\", key: \"tr\", sorter: true },\r\n    { title: \"今日胜率\", dataIndex: \"r1\", key: \"r1\", sorter: true },\r\n    { title: \"今日输赢\", dataIndex: \"tp\", key: \"tp\", sorter: true },\r\n    {\r\n      title: \"操作\",\r\n      width: \"200px\",\r\n      fixed: \"right\",\r\n      render: (_, record) => {\r\n        return (\r\n          <div style={{ width: \"70px\" }}>\r\n            <Popconfirm\r\n              title=\"确定复制？\"\r\n              onConfirm={() => {}}\r\n              okText=\"确定\"\r\n              cancelText=\"取消\"\r\n            >\r\n              <a>复制</a>\r\n            </Popconfirm>\r\n            &nbsp;&nbsp;\r\n            <Popconfirm\r\n              title=\"确定删除?\"\r\n              onConfirm={() => {}}\r\n              okText=\"确定\"\r\n              cancelText=\"取消\"\r\n            >\r\n              <a>删除</a>\r\n            </Popconfirm>\r\n          </div>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n  //获取房间列表\r\n  const room_get_handle = async (params = {}) => {\r\n    try {\r\n      setLoading(true);\r\n      let data = await room_get({\r\n        page: pagination.current,\r\n        page_size: pagination.pageSize,\r\n        ...params,\r\n      });\r\n      // if (data.data.length > 0) {\r\n      //   const user_ids = get_id_user(data.data, { key: \"action_user\" });\r\n      //   const ids_names_data = await get_by_user_nam({\r\n      //     user_ids: user_ids.toString(),\r\n      //   });\r\n      //   let ids_names = ids_names_data.data;\r\n      //   data.data = repacle_id_user_name(data.data, {\r\n      //     key: \"action_user\",\r\n      //     data: ids_names,\r\n      //     trans_key: \"action_user_name\",\r\n      //   });\r\n      // }\r\n      setData(data.data);\r\n      setPagination({\r\n        ...pagination,\r\n        total: data.page.count,\r\n        pageSize: data.page.page_size,\r\n      });\r\n      setLoading(false);\r\n    } catch (e) {\r\n      setLoading(false);\r\n      console.error(e);\r\n    }\r\n  };\r\n  //表格改变触发\r\n  const onchange = (pagination) => {\r\n    setPagination({ ...pagination });\r\n  };\r\n  useEffect(async () => {\r\n    room_get_handle();\r\n  }, [pagination.current]);\r\n  return (\r\n    <>\r\n      <Table\r\n        bordered\r\n        loading={loading}\r\n        columns={columns}\r\n        dataSource={data}\r\n        scroll={{ x: 3300 }}\r\n        rowKey=\"id\"\r\n        pagination={pagination}\r\n        onChange={onchange}\r\n      ></Table>\r\n    </>\r\n  );\r\n};\r\nexport default forwardRef(ListTable);\r\n","import React,{ memo, useState, useEffect } from \"react\";\r\nimport { Modal, Form, Upload, message } from \"antd\";\r\nimport { LoadingOutlined, PlusOutlined } from \"@ant-design/icons\";\r\nimport { room_update } from \"../../../api/room\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst UpdateRoom = (props) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [imageUrl, setImageUrl] = useState(\"\");\r\n  const [path, setPath] = useState(\"\");\r\n  const { onCancel, visible, onOk } = props;\r\n  const [form] = Form.useForm();\r\n  const session = useSelector((state) => state.session);\r\n  //提交\r\n  const submit = async () => {\r\n    // console.log(form.getFieldsValue());\r\n    try {\r\n      form.validateFields().then(async () => {\r\n        // await role_create({\r\n        //   ...form.getFieldsValue(),\r\n        // });\r\n        await room_update({\r\n          ...form.getFieldsValue(),\r\n        });\r\n        form.resetFields();\r\n        message.success(\"修改成功\");\r\n        onOk();\r\n      });\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  const on_cancel = () => {\r\n    form.resetFields();\r\n    onCancel();\r\n  };\r\n  const getBase64 = (img, callback) => {\r\n    const reader = new FileReader();\r\n    reader.addEventListener(\"load\", () => callback(reader.result));\r\n    reader.readAsDataURL(img);\r\n  };\r\n\r\n  const handleChange = (info) => {\r\n    console.log(\"info\", info);\r\n    if (info.file.status === \"uploading\") {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    if (info.file.status === \"done\") {\r\n      // Get this url from response in real world.\r\n      getBase64(info.file.originFileObj, (imageUrl) => {\r\n        setImageUrl(imageUrl);\r\n        setLoading(false);\r\n      });\r\n\r\n      setPath(info.file.response.data);\r\n    }\r\n  };\r\n  const uploadButton = (\r\n    <div>\r\n      {loading ? <LoadingOutlined /> : <PlusOutlined />}\r\n      <div className=\"ant-upload-text\">Upload</div>\r\n    </div>\r\n  );\r\n  return (\r\n    <Modal\r\n      title=\"修改头像\"\r\n      visible={visible}\r\n      onCancel={on_cancel}\r\n      onOk={submit}\r\n    >\r\n      <Upload\r\n        name=\"avatar\"\r\n        listType=\"picture-card\"\r\n        className=\"avatar-uploader\"\r\n        showUploadList={false}\r\n        action={process.env.REACT_APP_BASE_URL + \"/upload\"}\r\n        headers={{ \"x-token\": session.token }}\r\n        // beforeUpload={beforeUpload}\r\n        onChange={handleChange}\r\n      >\r\n        {imageUrl ? (\r\n          <img src={imageUrl} alt=\"avatar\" style={{ width: \"100%\" }} />\r\n        ) : (\r\n          uploadButton\r\n        )}\r\n      </Upload>\r\n    </Modal>\r\n  );\r\n};\r\nexport default memo(UpdateRoom);\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n  Table,\r\n  Button,\r\n  Popconfirm,\r\n  Space,\r\n  message,\r\n  Divider,\r\n  InputNumber,\r\n  Switch,\r\n} from \"antd\";\r\nimport Page from \"../../components/Page\";\r\nimport dayjs from \"dayjs\";\r\nimport ListTable from \"./components/ListTable\";\r\nimport UpdateAvatar from \"./components/UpdateAvatar\";\r\nfunction Index(props) {\r\n  const appidList = useSelector((state) => state.appids);\r\n  const [create_visible, set_create_visible] = useState(false);\r\n  const [update_visible, set_update_visible] = useState(false);\r\n  const [UploadAvatarState, setUploadAvatarState] = useState({\r\n    id: \"\",\r\n    visible: false,\r\n  }); //更新头像参数\r\n  const childRef = useRef();\r\n  useEffect(() => {}, [appidList]);\r\n  const search_h = (value) => {\r\n    childRef.current.getData(value);\r\n  };\r\n  //添加场次\r\n  const handleAdd = () => {\r\n    set_create_visible(true);\r\n  };\r\n  //修改场次\r\n  const update_room_h = () => {\r\n    set_update_visible(true);\r\n  };\r\n  //修改头像\r\n  const setUploadAvatarState_h = (obj) => {\r\n    setUploadAvatarState({\r\n      ...obj,\r\n    });\r\n  };\r\n  return (\r\n    <Page title={props.route.title}>\r\n      <Space>\r\n        <Button type=\"primary\" onClick={() => handleAdd()}>\r\n          新增\r\n        </Button>\r\n        <InputNumber min={0} step={10}></InputNumber>\r\n        <Button type=\"primary\" onClick={() => handleAdd()}>\r\n          批量修改金额\r\n        </Button>\r\n        <Button type=\"primary\" onClick={() => handleAdd()}>\r\n          批量重置机器人\r\n        </Button>\r\n        <Button type=\"primary\" onClick={() => handleAdd()}>\r\n          批量复制机器人\r\n        </Button>\r\n        <span>批量修改状态:</span>\r\n        <Switch>批量启用/关闭</Switch>\r\n      </Space>\r\n      <Divider dashed />\r\n      <ListTable\r\n        ref={childRef}\r\n        update_room_h={update_room_h}\r\n        setUploadAvatarState={setUploadAvatarState_h}\r\n      />\r\n      <UpdateAvatar visible={UploadAvatarState.visible} />\r\n    </Page>\r\n  );\r\n}\r\nexport default Index;\r\n","import axios from \"utils/http\";\r\n\r\n//获取房间列表\r\nexport const room_get = (params) => {\r\n  return axios.get(`/admin/room-list`, params);\r\n};\r\n\r\n//新增房间列表\r\nexport const room_add = (params) => {\r\n  return axios.post(`/admin/room-list`, params);\r\n};\r\n\r\n//修改房间列表\r\nexport const room_update = (params) => {\r\n  return axios.put(`/admin/room-list`, params);\r\n};\r\n\r\n//删除房间列表\r\nexport const room_del = (params) => {\r\n  return axios.delete(`/admin/room-list`, params);\r\n};\r\n//返回房间名\r\nexport const room_get_by_name = (params) => {\r\n  return axios.get(`/admin/room-list-by-name`, params);\r\n};\r\n\r\n//机器人\r\n//获取机器人详情\r\nexport const robot_info_get = (params) => {\r\n  return axios.get(`/admin/wingman`, params);\r\n};\r\n\r\n//机器人特殊出牌设置新增\r\nexport const discard_config_create = (params) => {\r\n  return axios.jpost(\"/admin/wingman-discard-config\", params);\r\n};\r\n//机器人特殊出牌设置获取\r\nexport const discard_config_get = (params) => {\r\n  return axios.get(\"/admin/wingman-discard-config\", params);\r\n};\r\n//机器人特殊出牌设置修改\r\nexport const discard_config_update = (params) => {\r\n  return axios.put(\"/admin/wingman-discard-config\", params);\r\n};\r\n\r\n//机器人弃牌设置新增\r\nexport const dropcard_config_create = (params) => {\r\n  return axios.jpost(\"/admin/wingman-drop-config\", params);\r\n};\r\n//机器人弃牌设置获取\r\nexport const dropcard_config_get = (params) => {\r\n  return axios.get(\"/admin/wingman-drop-config\", params);\r\n};\r\n//机器人弃牌设置修改\r\nexport const dropcard_config_update = (params) => {\r\n  return axios.put(\"/admin/wingman-drop-config\", params);\r\n};\r\n\r\n//机器人房间设置获取\r\nexport const room_config_get = (params) => {\r\n  return axios.get(\"/admin/wingman-room-config\", params);\r\n};\r\n\r\n//机器人房间设置修改状态\r\nexport const room_config_set = (params) => {\r\n  return axios.put(\"/admin/wingman-room-config/set-status\", params);\r\n};\r\n//机器人房间设置新增\r\nexport const room_config_add = (params) => {\r\n  return axios.jpost(\"/admin/wingman-room-config\", params);\r\n};\r\n//机器人房间设置修改\r\nexport const room_config_update = (params) => {\r\n  return axios.put(\"/admin/wingman-room-config\", params);\r\n};\r\n//房间池规则新增\r\nexport const room_pool_rules_config_create = (params) => {\r\n  return axios.jpost(\"/admin/room-money-pool-rules-config\", params);\r\n};\r\n//房间池规则修改\r\nexport const room_pool_rules_config_update = (params) => {\r\n  return axios.put(\"/admin/room-money-pool-rules-config\", params);\r\n};\r\n//房间池规则获取\r\nexport const room_pool_rules_config_get = (params) => {\r\n  return axios.get(\"/admin/room-money-pool-rules-config\", params);\r\n};\r\n//房间池规则设置状态\r\nexport const room_pool_rules_config_set_status = (params) => {\r\n  return axios.put(\"/admin/room-money-pool-rules-config/set-status\", params);\r\n};\r\n//房间池配置新增\r\nexport const room_list_create = (params) => {\r\n  return axios.jpost(\"/admin/room-list\", params);\r\n};\r\n//房间池基本配置新增\r\nexport const room_money_pool_create = (params) => {\r\n  return axios.jpost(\"/admin/room-money-pool-config\", params);\r\n};\r\n//房间池基本配置获取\r\nexport const room_money_pool_get = (params) => {\r\n  return axios.get(\"/admin/room-money-pool-config\", params);\r\n};\r\n//房间池基本配置修改\r\nexport const room_money_pool_update = (params) => {\r\n  return axios.put(\"/admin/room-money-pool-config\", params);\r\n};\r\n//个人池条件配置删除\r\nexport const personal_adjust_cond_config_delete = (params) => {\r\n  return axios.delete(`/personal-adjust-cond-config/`, params);\r\n};\r\n//个人池条件配置新增\r\nexport const personal_adjust_cond_config_create = (params) => {\r\n  return axios.jpost(\"/admin/personal-adjust-cond-config\", params);\r\n};\r\n//个人池条件配置修改\r\nexport const personal_adjust_cond_config_update = (params) => {\r\n  return axios.put(\"/admin/personal-adjust-cond-config\", params);\r\n};\r\n//个人池条件配置获取\r\nexport const personal_adjust_cond_config_get = (params) => {\r\n  return axios.get(\"/admin/personal-adjust-cond-config\", params);\r\n};\r\n//个人池条件配置全部获取\r\nexport const personal_adjust_cond_config_get_all = (params) => {\r\n  return axios.get(\"/admin/personal-adjust-cond-config/list\", params);\r\n};\r\n//个人池冷却配置新增\r\nexport const personal_adjust_cd_config_create = (params) => {\r\n  return axios.jpost(\"/admin/personal-adjust-cd-config\", params);\r\n};\r\n//个人池冷却配置修改\r\nexport const personal_adjust_cd_config_update = (params) => {\r\n  return axios.put(\"/admin/personal-adjust-cd-config\", params);\r\n};\r\n//个人池冷却配置获取\r\nexport const personal_adjust_cd_config_get = (params) => {\r\n  return axios.get(\"/admin/personal-adjust-cd-config\", params);\r\n};\r\n\r\n//个人池规则配置新增\r\nexport const personal_adjust_rules_config_create = (params) => {\r\n  return axios.jpost(\"/admin/personal-adjust-rules-config\", params);\r\n};\r\n//个人池规则配置修改\r\nexport const personal_adjust_rules_config_update = (params) => {\r\n  return axios.put(\"/admin/personal-adjust-rules-config\", params);\r\n};\r\n//个人池规则配置修改状态\r\nexport const personal_adjust_rules_config_set_status = (params) => {\r\n  return axios.put(\"/admin/room-money-pool-config/set-status\", params);\r\n};\r\n\r\n//个人池规则配置获取\r\nexport const personal_adjust_rules_config_get = (params) => {\r\n  return axios.get(\"/admin/personal-adjust-rules-config\", params);\r\n};\r\n","import http from \"utils/http\";\r\nimport axios from \"../utils/axios\";\r\nexport const mock = async (params) => {\r\n  let data = await http.get(`/mock`, { params });\r\n\r\n  return data?.data;\r\n};\r\n//新增账号\r\nexport const accrount_create = async (params) => {\r\n  return await http.post(`/admin/user-web/create`, params);\r\n};\r\n\r\n//获取账号列表\r\nexport const account_get = async (params) => {\r\n  return http.get(`/admin/user-web/gets`, params);\r\n};\r\n//修改密码\r\nexport const password_update = async (params) => {\r\n  return await http.put(`/admin/user-web/update-password`, params);\r\n};\r\n//封停/解封\r\nexport const upload_block = async (params) => {\r\n  return http.put(`/admin/user-web/update-block`, params);\r\n};\r\n\r\n//修改角色\r\nexport const update_role = async (params) => {\r\n  return http.put(`/admin/user-web/update-role`, params);\r\n};\r\n\r\n//获取用户名称\r\nexport const get_by_user_nam = async (params) => {\r\n  return http.get(`/admin/component/gets-by-user-name`, params);\r\n};\r\n\r\nexport const getAccountLog = async (uid, params) => {\r\n  let data = await axios.get(`/users/${uid}/accountLog`, {params});\r\n  return data?.data\r\n};\r\n","import CryptoJS from 'crypto-js';\r\n\r\n// https://my.oschina.net/Lady/blog/1814825\r\nconst KP = {\r\n  key: '1234567812345678', // 秘钥 16*n:\r\n  iv: '1234567812345678'  // 偏移量\r\n};\r\n\r\nfunction getAesString(data, key, iv) { // 加密\r\n  key = CryptoJS.enc.Utf8.parse(key);\r\n  // alert(key）;\r\n  iv = CryptoJS.enc.Utf8.parse(iv);\r\n  let encrypted = CryptoJS.AES.encrypt(data, key,\r\n    {\r\n      iv,\r\n      mode: CryptoJS.mode.CBC,\r\n      padding: CryptoJS.pad.Pkcs7\r\n    });\r\n  return encrypted.toString();    // 返回的是base64格式的密文\r\n}\r\n\r\nfunction getDAesString(encrypted, key, iv) { // 解密\r\n  key = CryptoJS.enc.Utf8.parse(key);\r\n  iv = CryptoJS.enc.Utf8.parse(iv);\r\n  let decrypted = CryptoJS.AES.decrypt(encrypted, key,\r\n    {\r\n      iv,\r\n      mode: CryptoJS.mode.CBC,\r\n      padding: CryptoJS.pad.Pkcs7\r\n    });\r\n  return decrypted.toString(CryptoJS.enc.Utf8);      //\r\n}\r\n\r\n// SHA256\r\nconst sha256 = (data) => {\r\n  return CryptoJS.SHA256(data).toString();\r\n};\r\n\r\n// AES 对称秘钥加密\r\nconst aes = {\r\n  en: (data) => getAesString(data, KP.key, KP.iv),\r\n  de: (data) => getDAesString(data, KP.key, KP.iv)\r\n};\r\n// BASE64\r\nconst base64 = {\r\n  en: (data) => CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(data)),\r\n  de: (data) => CryptoJS.enc.Base64.parse(data).toString(CryptoJS.enc.Utf8)\r\n};\r\n\r\n// MD5\r\nconst md5 = (data) => {\r\n  return CryptoJS.MD5(data).toString();\r\n};\r\n\r\n\r\nexport {\r\n  aes,\r\n  md5,\r\n  sha256,\r\n  base64,\r\n};\r\n","/**\r\n * 处理sessionStorage 存储超过后，删除时间最后的数据\r\n * @type {{}}\r\n */\r\n\r\nvar cachePrefix = 'pic_';\r\nexport const addSessionStorage = (key, storeObj) => {\r\n  //定义一个前缀，表示只删除自己定义的缓存\r\n  // const cachePrefix = 'pic_';\r\n  // sessionStorage对大小是有限制的，所以要进行try catch\r\n  // 500KB左右的东西保存起来就会令到Resources变卡\r\n  // 2M左右就可以令到Resources卡死，操作不了\r\n  // 5M就到了Chrome的极限\r\n  // 超过之后会抛出如下异常：\r\n  // DOMException: Failed to execute 'setItem' on 'Storage': Setting the value of 'basket-http://file.com/ykq/wap/v3Templates/timeout/timeout/large.js' exceeded the quota\r\n\r\n\r\n\r\n  //判断sessionStorage大于500k，删除最后一个session\r\n  var size = 0;\r\n  let item;\r\n  const tempArr = [];\r\n  let obj = sessionStorage;\r\n  for(item in obj) {\r\n    if (item.indexOf(cachePrefix) === 0) {\r\n      tempArr.push(item);\r\n      size += obj.getItem(item).length;\r\n    }\r\n  }\r\n\r\n  let sizeK=(size / 1024).toFixed(2);\r\n  if(sizeK > 500 && tempArr.length > 0){\r\n    // 删除缓存时间最早的\r\n    sessionStorage.removeItem(tempArr[0]);\r\n    // 删除后在再添加，利用递归完成\r\n    addSessionStorage(key, storeObj);\r\n  }\r\n\r\n  sessionStorage.setItem(cachePrefix + key, storeObj);\r\n};\r\n\r\nexport const getSessionStorage = (key) => {\r\n  //定义一个前缀，表示只删除自己定义的缓存\r\n  // const cachePrefix = 'pic_';\r\n  // sessionStorage对大小是有限制的，所以要进行try catch\r\n  // 500KB左右的东西保存起来就会令到Resources变卡\r\n  // 2M左右就可以令到Resources卡死，操作不了\r\n  // 5M就到了Chrome的极限\r\n  // 超过之后会抛出如下异常：\r\n  // DOMException: Failed to execute 'setItem' on 'Storage': Setting the value of 'basket-http://file.com/ykq/wap/v3Templates/timeout/timeout/large.js' exceeded the quota\r\n  return sessionStorage.getItem(cachePrefix + key);\r\n};\r\n","import axios from './axios';\r\nimport dayjs from 'dayjs';\r\nimport {md5, sha256} from \"./crypto\";\r\nimport store from 'store'\r\nimport {message} from \"antd\";\r\nimport {addSessionStorage, getSessionStorage} from \"./storageUtil\";\r\nconst utc = require('dayjs/plugin/utc');\r\ndayjs.extend(utc);\r\nlet AWS = require('aws-sdk');\r\nconst fs = require('fs');\r\nconst s3Enable = store.getState().s3Enable;\r\n\r\nasync function getAwsKey(params){\r\n  let resp = await axios.get('/user/awssts',{params})\r\n  let data =resp.data\r\n  let con={\r\n    region: data.region,\r\n    accessKeyId: data.access_key_id,\r\n    secretAccessKey: data.secret_access_key,\r\n    session_token:data.session_token,\r\n    bucket:data.bucket,\r\n    appName:data.app_name,\r\n    acl:data.acl,\r\n  }\r\n  return con\r\n}\r\n\r\nlet bucket=\"mz-dev-only\";\r\nlet session_token=\"FwoGZXIvYXdzEBAaDFCRekXM82IhgtTfWSKCAYW9XXLeLWyVZvm6bNfcmyYwArGAMVb0gReXZfHppb3HtwrcAFHVUmxeSjv5bUnijbWsJZHVHnF2Hx5at8UaIVbYunwqmGGhCyQn13xH9jq+py7wRcEd8Zmhz1syOxGcQZloBUldJbeZW0rozQFO/HSnzL+LsWJzGLWj2FyQ9B86ABgoiOC0hwYyKHH/MbutWDmo3zRPgmY/tsP4FS+//v5SV2vNUAVmUIvascd4mmOgHa4=\"\r\nAWS.config.update({\r\n  region: \"ap-southeast-1\",\r\n  accessKeyId: \"ASIAS2REQI3OBOWXO6R2\",\r\n  secretAccessKey: \"YKvObUARB+Ik4wcjmHYGn7M2PR/dV8RZ6/GoAIo8\",\r\n});\r\n\r\nconst s3Client = new AWS.S3();\r\n\r\n/**\r\n * AWS S3下载文件\r\n */\r\nexport async function downloadFromS3(fileName,appid,dir=\"\") {\r\n  var acces = getSessionStorage(\"accessKeyId\");\r\n  let con = JSON.parse(acces);\r\n  if(!con){\r\n    con = await getAwsKey(appid);\r\n    addSessionStorage(\"accessKeyId\",JSON.stringify(con));\r\n  }\r\n  //poker文件扔到appname通用文件中\r\n  if(fileName.indexOf(\"poker\") !== -1 && con.appName){\r\n    fileName=con.appName+fileName\r\n  }\r\n  AWS.config.update(\r\n      {\r\n        region: con.region,\r\n        accessKeyId: con.accessKeyId,\r\n        secretAccessKey: con.secretAccessKey,\r\n      }\r\n  );\r\n  AWS.config.credentials.sessionToken=con.session_token;\r\n\r\n  return new Promise((resolve, _reject) => {\r\n    const params = { Bucket: con.bucket, Key: dir+ fileName};\r\n    new AWS.S3().getObject(params, (error, data) => {\r\n      if (error) {\r\n        _reject(error);\r\n      }\r\n      if (data) {\r\n        resolve(data.Body);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n\r\n\r\nexport async function download(fileName) {\r\n  let result = null;\r\n  try {\r\n    result = await downloadFromS3(fileName);\r\n  } catch (error) {\r\n    result = error;\r\n  } finally {\r\n    console.dir(result);\r\n  }\r\n}\r\n\r\nexport const awsSave = async  (tempPath, fileName) => {\r\n  return new Promise((resolve, reject) => {\r\n    // 文件读取\r\n    fs.readFile(tempPath, (err, data) => {\r\n      if (err) {\r\n        reject(err);\r\n      } else {\r\n        const params = {\r\n          Bucket: bucket,\r\n          Key: fileName,\r\n          Body: data,\r\n          // ACL: aws.acl,\r\n        };\r\n        s3Client.upload(params, null, (uploadErr, data) => {\r\n          if (uploadErr) {\r\n            reject(uploadErr);\r\n          } else {\r\n            resolve(data.Location);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  })\r\n};\r\n\r\nexport const awsUploadFile = async  (data, fileName,appid,dir=\"\") => {\r\n  let con = await getAwsKey({appid});\r\n  AWS.config.update(\r\n      {\r\n        region: con.region,\r\n        accessKeyId: con.accessKeyId,\r\n        secretAccessKey: con.secretAccessKey,\r\n      }\r\n  );\r\n  // //判断图片文件格式\r\n  // bytesToHexString(data);\r\n  let lastIndexTmp=fileName.lastIndexOf(\".\")\r\n  let suffer= fileName.substr(lastIndexTmp);\r\n  let name = fileName.substr(0,lastIndexTmp);\r\n  //文件名称唯一\r\n  let keyName = con.appName+\"/images/\"+dir+dayjs.utc().unix()+md5(name)+suffer\r\n  AWS.config.credentials.sessionToken=con.session_token;\r\n  return new Promise((resolve, reject) => {\r\n        const params = {\r\n          Bucket: con.bucket,\r\n          Key: keyName,\r\n          Body: data,\r\n          ACL: con.acl,\r\n        };\r\n          new AWS.S3().upload(params, null, (uploadErr, data) => {\r\n          if (uploadErr) {\r\n            reject(uploadErr);\r\n          } else {\r\n            // resolve(data.Location);\r\n            resolve(keyName); //存储相对路径\r\n          }\r\n        });\r\n  })\r\n};\r\n\r\nfunction bytesToHexString(data){\r\n  let res=\"\"\r\n  if (data == null || data.length <= 0) {\r\n    return null;\r\n  }\r\n\r\n  for (let i = 0 ;i<data.length;i++){\r\n    let v = data[i] & 0xFF;\r\n    let hv = v.toString();\r\n    if (hv.length < 2){\r\n      res += 0\r\n    }\r\n    res += hv\r\n  }\r\n  return res\r\n}\r\n\r\n/**\r\n * AWS S3上传文件\r\n */\r\nexport async function awsUpload(tempPath, fileName,appid,dir=\"\") {\r\n  //如果为服务器上传，直接返回\r\n  if (!s3Enable) {\r\n    return \"false\"\r\n  }\r\n\r\n  let result = null;\r\n  try {\r\n    result = await awsUploadFile(tempPath, fileName,appid,dir);\r\n  } catch (error) {\r\n    console.error(error);\r\n    message.error(\"upload failed\");\r\n  } finally {\r\n    // console.dir(result);\r\n  }\r\n  return result\r\n\r\n}\r\n\r\n","import ttypes from 'constants/ttypes';\r\nimport {awsUploadFile, downloadFromS3, downloadFromS3Url} from \"./aws\";\r\nimport {Image} from \"antd\";\r\nimport React from \"react\";\r\nimport {addSessionStorage, getSessionStorage} from \"./storageUtil\";\r\nimport store from 'store'\r\nconst cdnUrl = store.getState().cdnUrl;\r\nconst s3Enable = store.getState().s3Enable;\r\n\r\nexport const formatUrl = pic => {\r\n  if (pic.substr(0, 4) === \"http\") {\r\n    return pic;\r\n  }\r\n  // return process.env.REACT_APP_CDN_URL + \"/\" + pic;\r\n\r\n  return cdnUrl + \"/\" + pic;\r\n};\r\n\r\nexport const formatCash = cash => {\r\n  const number = (cash/100) || 0;\r\n  return number;\r\n  // return '₹' + number\r\n};\r\n\r\n\r\nexport const formatTtype = ttype => {\r\n  return ttypes[ttype] || \"\";\r\n};\r\n\r\nexport const toPercent = (point, len = 2) => {\r\n  let str = Number(point * 100).toFixed(len);\r\n  str += \"%\";\r\n  return str;\r\n};\r\n\r\nexport const formatUrlS3 = async (pic,appid) => {\r\n    if(!pic){\r\n        return\r\n    }\r\n    if (pic.substr(0, 4) === \"http\") {\r\n        return pic;\r\n    }\r\n\r\n    //判断是否为s3拉取\r\n    if (!s3Enable) {\r\n        return cdnUrl + \"/\" + pic;\r\n    }\r\n    //从缓存中取pic\r\n    var picStor = getSessionStorage(pic);\r\n    if(picStor){\r\n        return picStor;\r\n    }\r\n\r\n    let key= pic;\r\n  let resp = null;\r\n  try {\r\n    resp = await downloadFromS3(key,appid);\r\n  } catch (error) {\r\n    resp = null\r\n    console.error(\"download failed ,\"+error)\r\n  }\r\n\r\n  if(resp == null ){\r\n    return \"\";\r\n  }\r\n  let suffer= pic.substr(pic.lastIndexOf(\".\")+1);\r\n  var imageUrl = \"data:image/\"+suffer+\";base64,\" + encode(resp);\r\n\r\n    //添加缓存\r\n    addSessionStorage(pic,imageUrl);\r\n  return imageUrl;\r\n};\r\n\r\nfunction encode(data)\r\n{\r\n  var str = data.reduce(function(a,b){ return a+String.fromCharCode(b) },'');\r\n  return btoa(str).replace(/.{76}(?=.)/g,'$&\\n');\r\n}\r\n","import {Button, Input, Space} from \"antd\";\r\nimport {SearchOutlined} from \"@ant-design/icons\";\r\nimport React from \"react\";\r\n\r\nconst handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n  confirm();\r\n  if (dataIndex) {\r\n    console.log('handleSearch-dataIndex:', dataIndex);\r\n    console.log('handleSearch-selectedKeys:', selectedKeys);\r\n  }\r\n};\r\n\r\nexport const getColumnSearchProps = dataIndex => ({\r\n  filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\r\n    <div style={{ padding: 8 }}>\r\n      <Input\r\n        placeholder={`Search ${dataIndex}`}\r\n        value={selectedKeys[0]}\r\n        onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\r\n        onPressEnter={() => handleSearch(selectedKeys, confirm, dataIndex)}\r\n        style={{ width: 188, marginBottom: 8, display: 'block' }}\r\n      />\r\n      <Space>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => handleSearch(selectedKeys, confirm, dataIndex)}\r\n          icon={<SearchOutlined />}\r\n          size=\"small\"\r\n          style={{ width: 90 }}\r\n        >\r\n          Search\r\n        </Button>\r\n        <Button onClick={() => clearFilters()} size=\"small\" style={{ width: 90 }}>\r\n          Reset\r\n        </Button>\r\n      </Space>\r\n    </div>\r\n  ),\r\n  filterIcon: filtered => <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />,\r\n});\r\n","import axios from \"utils/http\";\r\n\r\n//获取账号日志列表\r\nexport const account_log_get = async (params) => {\r\n  let data = await axios.get(`/admin/component/gets-by-api-log`, {\r\n    ...params,\r\n    status: 1,\r\n  });\r\n\r\n  return data;\r\n};\r\n//获取角色日志列表\r\nexport const role_log_get = async (params) => {\r\n  let data = await axios.get(`/admin/component/gets-by-api-log`, {\r\n    ...params,\r\n    status: 2,\r\n  });\r\n\r\n  return data;\r\n};\r\n\r\n//获取游戏日志列表\r\nexport const game_log_get = async (params) => {\r\n  let data = await axios.get(`/admin/component/gets-by-api-log`, {\r\n    ...params,\r\n    status: 3,\r\n  });\r\n\r\n  return data;\r\n};\r\n","export default {\r\n  1: \"Points Rummy\",\r\n  2: \"Pool Rummy\",\r\n  3: \"Ten Cards\",\r\n};\r\n\r\nexport const ttypeArr = [\r\n  {ttype: 1, name: 'Points Rummy'},\r\n  {ttype: 2, name: 'Pool Rummy'},\r\n  {ttype: 3, name: 'Ten Cards'},\r\n];\r\n"],"sourceRoot":""}