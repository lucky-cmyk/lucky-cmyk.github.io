(this.webpackJsonpstardust_web=this.webpackJsonpstardust_web||[]).push([[25],{1329:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var a=n(31),r=n(4),c=n.n(r),i=n(7),o=n(70),u=n(0),s=n(395),l=n(8),d=n(102),f=n(415),m=n(495),j=n(74),b=n(10),g=function(e){var t=Object(u.useState)({total:0,data:[]}),n=Object(o.a)(t,2),r=n[0],g=n[1],O=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/security/flagLog",{params:t});case 2:if(0===(n=e.sent).code){e.next=5;break}return e.abrupt("return");case 5:a=n.data,r={},a.lastLogin&&a.lastLogin.length>0&&a.lastLogin.map((function(e){r[e.uid]=e.time})),i=[],a.log&&a.log.map((function(e){var t=e.log;t.reg_time=e.user.reg_time,t.uname=e.user.uname,t.last_login=r[e.user.uid],i.push(t)})),g({total:a.total,data:i});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=[{title:"\u5e8f\u53f7",dataIndex:"key"},Object(a.a)(Object(a.a)({title:"UID",dataIndex:"uid",key:"uid"},Object(m.a)("uid")),{},{render:function(e){return Object(b.jsx)(j.b,{to:"/user/userInfo?uid=".concat(e),children:e})}}),{title:"\u6635\u79f0",key:"uname",dataIndex:"uname"},{title:"\u6807\u8bb0\u65f6\u95f4",key:"create_time",dataIndex:"create_time",render:function(e){return s.a.unix(e).utc().utcOffset(330).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u6ce8\u518c\u65f6\u95f4",key:"reg_time",dataIndex:"reg_time",render:function(e){return s.a.unix(e).utc().utcOffset(330).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u6700\u540e\u767b\u5f55\u65f6\u95f4",key:"last_login",dataIndex:"last_login",render:function(e){return s.a.unix(e).utc().utcOffset(330).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u6807\u8bb0\u539f\u56e0",key:"reason",dataIndex:"reason",render:function(e){return{1:"\u8fde\u7eed\u5f03\u724c",2:"\u8fde\u7eed\u8bc8\u80e1",3:"\u8fde\u7eed\u5403\u724c",4:"\u8fde\u7eed\u8d62"}[e]}},{title:"\u5173\u8054UID",key:"with_uid",dataIndex:"with_uid",render:function(e){return Object(b.jsx)(j.b,{to:"/user/userInfo?uid=".concat(e),children:e})}}];return Object(b.jsx)(d.a,{title:"\u5f02\u5e38\u7528\u6237\u540d\u5355",children:Object(b.jsx)(f.a,{columns:h,fetchApi:O,data:r.data,total:r.total,pageSize:20,rangeSearch:{showTime:!0},showTotal:function(e,t){return"\u7b2c".concat(t[0],"-").concat(t[1],"\u6761, \u5171").concat(e,"\u6761\u6570\u636e")}})})}},395:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var a=n(134),r=n.n(a),c=n(450);r.a.extend(c);var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return r.a.unix(e).utc().utcOffset(330).format(t)};t.a=r.a},406:function(e,t,n){"use strict";var a=n(496),r=n.n(a),c=n(401),i=n.n(c),o=(n(497),i()(r.a));t.a=o},415:function(e,t,n){"use strict";n(378);var a=n(377),r=(n(354),n(355)),c=(n(380),n(381)),i=(n(132),n(57)),o=n(4),u=n.n(o),s=n(7),l=n(31),d=n(70),f=n(0),m=n(406),j=n(10),b=m.a.RangePicker;function g(e){var t=e.fetchApi,n=e.columns,o=e.forceUpdate,m=e.data,g=e.rangeSearch,O=e.components,h=e.current,p=e.total,y=e.pageSize,x=e.showTotal,Y=e.rowSelection,S=g&&g.rangeTime?[g.rangeTime[0].format(g.layout||"YYYY-MM-DD HH:mm:ss"),g.rangeTime[1].format(g.layout||"YYYY-MM-DD HH:mm:ss")]:null,v=Object(f.useState)(!1),w=Object(d.a)(v,2),D=w[0],k=w[1],I=Object(f.useState)({current:1,pageSize:y||20,total:p||1e5,showTotal:x}),T=Object(d.a)(I,2),H=T[0],M=T[1],_=Object(f.useState)({}),C=Object(d.a)(_,2),z=C[0],J=C[1],U=Object(f.useState)([]),K=Object(d.a)(U,2),L=K[0],N=K[1],E=Object(f.useState)(S),A=Object(d.a)(E,2),F=A[0],P=A[1],R=Object(f.useState)(!F),q=Object(d.a)(R,2),B=q[0],V=q[1],G=Object(f.useState)(g?g.rangeTime||[]:null),Q=Object(d.a)(G,2),W=Q[0],X=Q[1],Z=m.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{key:t+1})})),$=function(){var e=Object(s.a)(u.a.mark((function e(n,a,r){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),c={page:n.current,pageSize:n.pageSize,filters:a},F&&(c.startTime=F[0],c.endTime=F[1]),r.length>0&&(c.sorter=r[0]),console.log("rangeTime",F,c),e.next=7,t(c);case 7:k(!1);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();Object(f.useEffect)((function(){M(Object(l.a)(Object(l.a)({},H),{},{total:p||1e4}))}),[p]),Object(f.useEffect)((function(){$(H,z,L),h&&h(H)}),[z,o,L,y,H.current]);return Object(j.jsxs)(j.Fragment,{children:[g&&Object(j.jsxs)(r.b,{children:[Object(j.jsx)(b,{disabledDate:function(e){if(!W||0===W.length||!g||!g.rangeDays)return!1;var t=W[0]&&e.diff(W[0],"days")>=g.rangeDays;return W[1]&&W[1].diff(e,"days")>=g.rangeDays||t},defaultValue:g.rangeTime||null,format:g.layout||"YYYY-MM-DD HH:mm:ss",showTime:g.showTime||!1,onChange:function(e,t){P(t),V(!e)},onCalendarChange:function(e){return X(e)}}),Object(j.jsx)(i.a,{type:"primary",onClick:function(){return $(H,z,L)},disabled:B,children:"Inquire"}),Object(j.jsx)(c.a,{dashed:!0})]}),Object(j.jsx)(a.a,{rowSelection:Y,components:O,scroll:{x:!0},bordered:!0,loading:D,pagination:H,columns:n,dataSource:Z,onChange:function(e,t,n){console.log("handleTableChange:",e,t,n),M(e),J(t),n.order?N([{key:n.columnKey,order:"ascend"===n.order?"asc":"desc"}]):N([])}})]})}t.a=Object(f.memo)(g,(function(e,t){return JSON.stringify(e.data)===JSON.stringify(t.data)&&JSON.stringify(e.columns)===JSON.stringify(t.columns)&&e.forceUpdate==t.forceUpdate}))},495:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(354);var a=n(355),r=(n(132),n(57)),c=(n(207),n(133)),i=n(166),o=(n(0),n(10)),u=function(e,t,n){t(),n&&(console.log("handleSearch-dataIndex:",n),console.log("handleSearch-selectedKeys:",e))},s=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,s=t.selectedKeys,l=t.confirm,d=t.clearFilters;return Object(o.jsxs)("div",{style:{padding:8},children:[Object(o.jsx)(c.a,{placeholder:"Search ".concat(e),value:s[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return u(s,l,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(o.jsxs)(a.b,{children:[Object(o.jsx)(r.a,{type:"primary",onClick:function(){return u(s,l,e)},icon:Object(o.jsx)(i.a,{}),size:"small",style:{width:90},children:"Search"}),Object(o.jsx)(r.a,{onClick:function(){return d()},size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:function(e){return Object(o.jsx)(i.a,{style:{color:e?"#1890ff":void 0}})}}}}}]);
//# sourceMappingURL=25.d9d3dd62.chunk.js.map