(this.webpackJsonpruby_rummy_web=this.webpackJsonpruby_rummy_web||[]).push([[33],{1665:function(e,t,n){"use strict";n.r(t);n(550);var a=n(551),r=(n(147),n(71)),i=(n(173),n(110)),c=n(606),o=n(72),s=n(3),l=n.n(s),u=n(9),f=n(84),d=n(0),m=n.n(d),b=n(87),h=n(111),p=n(534),O=n(594),v=n(535),y=(n(542),n(543)),g=(n(519),n(518)),j=(n(279),n(86)),E=(n(533),n(532)),C=(n(278),n(148)),S=n(280);n(603);var x=function(e){C.a.TextArea,E.a.Option,S.a.RangePicker;var t=e.data,n=e.visible,a=e.onCancel,i=e.onOk,c=Object(d.useState)([]),s=Object(f.a)(c,2),l=s[0],u=s[1],b=j.a.useForm(),h=Object(f.a)(b,1)[0];return Object(d.useEffect)((function(){u(t)}),[t]),Object(d.useEffect)((function(){console.log("Form data initial",l),h.resetFields()}),[l]),m.a.createElement(y.a,{visible:n,title:"\u63d0\u6b3e\u81ea\u52a8\u5ba1\u6279\u5371\u9669\u533a\u57df",maskClosable:!1,closable:!1,getContainer:!1,footer:null},m.a.createElement(j.a,{form:h,name:"form_in_modal",initialValues:l},m.a.createElement(j.a.Item,{label:"\u90a6",name:"state",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90a6!"}]},m.a.createElement(C.a,{style:{width:"60%"}})),m.a.createElement(j.a.Item,{label:"\u57ce\u5e02",name:"city",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u57ce\u5e02"}]},m.a.createElement(C.a,{style:{width:"60%"}})),m.a.createElement(j.a.Item,null,m.a.createElement(g.b,null,m.a.createElement(r.a,{type:"primary",htmlType:"submit",onClick:function(){var e=h.getFieldsValue();console.log("submitData:",e);var n=Object(o.a)(Object(o.a)({},t),e);i(n)}},"\u786e\u5b9a"),m.a.createElement(r.a,{htmlType:"button",onClick:a},"\u53d6\u6d88")))))};t.default=function(){var e=Object(d.useState)([]),t=Object(f.a)(e,2),n=t[0],s=t[1],y=Object(d.useState)(!1),g=Object(f.a)(y,2),j=(g[0],g[1]),E=Object(d.useState)(!1),C=Object(f.a)(E,2),S=C[0],k=C[1],D=Object(d.useState)([]),T=Object(f.a)(D,2),w=T[0],$=T[1],P=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.gb)(t);case 2:n=e.sent,console.log("list----\x3e",n),s(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e,t){$(e),k(!0)},M=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,u,f,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),!t.id){e.next=18;break}return e.next=4,Object(b.Gb)(t.id,Object(o.a)({},t));case 4:if(a=e.sent,j(!1),0!==a.code){e.next=14;break}r=Object(c.a)(n),u=r.findIndex((function(e){return t.id===e.id})),f=r[u],r.splice(u,1,Object(o.a)(Object(o.a)({},f),t)),s(r),e.next=16;break;case 14:return i.b.error(a.err),e.abrupt("return");case 16:e.next=28;break;case 18:return e.next=20,Object(b.t)(Object(o.a)({},t));case 20:if(d=e.sent,j(!1),0!==d.code){e.next=26;break}s([Object(o.a)(Object(o.a)({},t),{},{id:d.data.id,key:d.data.id,log_time:d.data.log_time})].concat(Object(c.a)(n))),e.next=28;break;case 26:return i.b.error(d.err),e.abrupt("return");case 28:k(!1);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.K)(t.id,t);case 2:if(0===(a=e.sent).code){e.next=6;break}return i.b.error(a.err),e.abrupt("return");case 6:r=Object(c.a)(n),s(r.filter((function(e){return e.id!==t.id})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=[Object(o.a)({title:"ID",key:"id",dataIndex:"id"},Object(O.a)("id")),{title:"State",dataIndex:"state"},{title:"City",dataIndex:"city"},{title:"Operating time",dataIndex:"log_time",render:function(e){return v.a.unix(e).utc().utcOffset(330).format("YYYY-MM-DD HH:mm:ss")}},{title:"Operation",dataIndex:"operation",align:"center",render:function(e,t,n){return m.a.createElement("span",null,m.a.createElement(r.a,{type:"link",onClick:function(){return Y(t)}},"\u7f16\u8f91"),m.a.createElement(a.a,{title:"Sure to delete?",onConfirm:function(){return N(t)}},m.a.createElement(r.a,{type:"link"},"\u5220\u9664")))}}];return m.a.createElement(h.a,{title:"Auto Review Danger Area"},m.a.createElement(r.a,{type:"primary",onClick:function(){return Y()}},"\u65b0\u589e"),m.a.createElement(p.a,{columns:H,fetchApi:P,data:n}),m.a.createElement(x,{data:w,visible:S,onOk:M,onCancel:function(){k(!1)}}))}},522:function(e,t,n){"use strict";n(55),n(529)},523:function(e,t,n){"use strict";var a=n(6),r=n.n(a),i=n(5),c=n.n(i),o=n(0),s=n(4),l=n.n(s),u=n(123),f=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};t.a=function(e){return o.createElement(u.a,null,(function(t){var n,a=t.getPrefixCls,i=t.direction,s=e.prefixCls,u=e.type,d=void 0===u?"horizontal":u,m=e.orientation,b=void 0===m?"center":m,h=e.className,p=e.children,O=e.dashed,v=e.plain,y=f(e,["prefixCls","type","orientation","className","children","dashed","plain"]),g=a("divider",s),j=b.length>0?"-".concat(b):b,E=!!p,C=l()(g,"".concat(g,"-").concat(d),(n={},c()(n,"".concat(g,"-with-text"),E),c()(n,"".concat(g,"-with-text").concat(j),E),c()(n,"".concat(g,"-dashed"),!!O),c()(n,"".concat(g,"-plain"),!!v),c()(n,"".concat(g,"-rtl"),"rtl"===i),n),h);return o.createElement("div",r()({className:C},y,{role:"separator"}),p&&o.createElement("span",{className:"".concat(g,"-inner-text")},p))}))}},529:function(e,t,n){},534:function(e,t,n){"use strict";n(547);var a=n(546),r=(n(519),n(518)),i=(n(522),n(523)),c=(n(147),n(71)),o=n(3),s=n.n(o),l=n(9),u=n(72),f=n(84),d=n(0),m=n.n(d),b=n(280).a.RangePicker;t.a=Object(d.memo)((function(e){var t=e.fetchApi,n=e.columns,o=e.forceUpdate,h=e.data,p=e.rangeSearch,O=e.components,v=e.current,y=e.total,g=e.pageSize,j=e.showTotal,E=e.rowSelection,C=p&&p.rangeTime?[p.rangeTime[0].format(p.layout||"YYYY-MM-DD HH:mm:ss"),p.rangeTime[1].format(p.layout||"YYYY-MM-DD HH:mm:ss")]:null,S=Object(d.useState)(!1),x=Object(f.a)(S,2),k=x[0],D=x[1],T=Object(d.useState)({current:1,pageSize:g||20,total:y||1e5,showTotal:j}),w=Object(f.a)(T,2),$=w[0],P=w[1],Y=Object(d.useState)({}),M=Object(f.a)(Y,2),N=M[0],H=M[1],I=Object(d.useState)([]),U=Object(f.a)(I,2),A=U[0],K=U[1],z=Object(d.useState)(C),J=Object(f.a)(z,2),R=J[0],V=J[1],_=Object(d.useState)(!R),B=Object(f.a)(_,2),F=B[0],L=B[1],G=Object(d.useState)(p?p.rangeTime||[]:null),q=Object(f.a)(G,2),W=q[0],Z=q[1],Q=h.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{key:t+1})})),X=function(){var e=Object(l.a)(s.a.mark((function e(n,a,r){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),i={page:n.current,pageSize:n.pageSize,filters:a},R&&(i.startTime=R[0],i.endTime=R[1]),r.length>0&&(i.sorter=r[0]),console.log("rangeTime",R,i),e.next=7,t(i);case 7:D(!1);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){P(Object(u.a)(Object(u.a)({},$),{},{total:y||1e4}))}),[y]),Object(d.useEffect)((function(){X($,N,A),v&&v($)}),[N,o,A,g,$.current]),m.a.createElement(m.a.Fragment,null,p&&m.a.createElement(r.b,null,m.a.createElement(b,{disabledDate:function(e){if(!W||0===W.length||!p||!p.rangeDays)return!1;var t=W[0]&&e.diff(W[0],"days")>=p.rangeDays;return W[1]&&W[1].diff(e,"days")>=p.rangeDays||t},defaultValue:p.rangeTime||null,format:p.layout||"YYYY-MM-DD HH:mm:ss",showTime:p.showTime||!1,onChange:function(e,t){V(t),L(!e)},onCalendarChange:function(e){return Z(e)}}),m.a.createElement(c.a,{type:"primary",onClick:function(){return X($,N,A)},disabled:F},"Inquire"),m.a.createElement(i.a,{dashed:!0})),m.a.createElement(a.a,{rowSelection:E,components:O,scroll:{x:!0},bordered:!0,loading:k,pagination:$,columns:n,dataSource:Q,onChange:function(e,t,n){console.log("handleTableChange:",e,t,n),P(e),H(t),n.order?K([{key:n.columnKey,order:"ascend"===n.order?"asc":"desc"}]):K([])}}))}),(function(e,t){return JSON.stringify(e.data)===JSON.stringify(t.data)&&JSON.stringify(e.columns)===JSON.stringify(t.columns)&&e.forceUpdate==t.forceUpdate}))},535:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var a=n(85),r=n.n(a),i=n(548);r.a.extend(i);var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return r.a.unix(e).utc().utcOffset(330).format(t)};t.a=r.a},544:function(e,t,n){"use strict";n(55),n(555)},548:function(e,t,n){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(a,r,i){var c=r.prototype;i.utc=function(e){var t={date:e,utc:!0,args:arguments};return new r(t)},c.utc=function(t){var n=i(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},c.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var o=c.parse;c.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),o.call(this,e)};var s=c.init;c.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var l=c.utcOffset;c.utcOffset=function(a,r){var i=this.$utils().u;if(i(a))return this.$u?0:i(this.$offset)?l.call(this):this.$offset;if("string"==typeof a&&null===(a=function(e){void 0===e&&(e="");var a=e.match(t);if(!a)return null;var r=(""+a[0]).match(n)||["-",0,0],i=r[0],c=60*+r[1]+ +r[2];return 0===c?0:"+"===i?c:-c}(a)))return this;var c=Math.abs(a)<=16?60*a:a,o=this;if(r)return o.$offset=c,o.$u=0===a,o;if(0!==a){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(c+s,e)).$offset=c,o.$x.$localOffset=s}else o=this.utc();return o};var u=c.format;c.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return u.call(this,t)},c.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*e},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var f=c.toDate;c.toDate=function(e){return"s"===e&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var d=c.diff;c.diff=function(e,t,n){if(e&&this.$u===e.$u)return d.call(this,e,t,n);var a=this.local(),r=i(e).local();return d.call(a,r,t,n)}}}()},549:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return e?"function"===typeof e?e():e:null}},550:function(e,t,n){"use strict";n(55),n(544),n(147),n(556)},551:function(e,t,n){"use strict";var a=n(6),r=n.n(a),i=n(16),c=n.n(i),o=n(0),s=n(4),l=n.n(s),u=n(100),f=n.n(u),d=n(14),m=n(113),b=n(71),h=n(176),p=n(112),O=n(114),v=n(123),y=n(549),g=n(26),j=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},E=o.forwardRef((function(e,t){var n=o.useState(e.visible),a=c()(n,2),i=a[0],s=a[1];o.useEffect((function(){"visible"in e&&s(e.visible)}),[e.visible]),o.useEffect((function(){"defaultVisible"in e&&s(e.defaultVisible)}),[e.defaultVisible]);var u=function(t,n){"visible"in e||s(t),e.onVisibleChange&&e.onVisibleChange(t,n)},f=function(t){u(!1,t),e.onConfirm&&e.onConfirm.call(void 0,t)},E=function(t){u(!1,t),e.onCancel&&e.onCancel.call(void 0,t)},C=o.useContext(v.b).getPrefixCls,S=e.prefixCls,x=e.placement,k=e.children,D=e.overlayClassName,T=j(e,["prefixCls","placement","children","overlayClassName"]),w=C("popover",S),$=C("popconfirm",S),P=l()($,D),Y=o.createElement(p.a,{componentName:"Popconfirm",defaultLocale:O.a.Popconfirm},(function(t){return function(t,n){var a=e.okButtonProps,i=e.cancelButtonProps,c=e.title,s=e.cancelText,l=e.okText,u=e.okType,d=e.icon;return o.createElement("div",{className:"".concat(t,"-inner-content")},o.createElement("div",{className:"".concat(t,"-message")},d,o.createElement("div",{className:"".concat(t,"-message-title")},Object(y.a)(c))),o.createElement("div",{className:"".concat(t,"-buttons")},o.createElement(b.a,r()({onClick:E,size:"small"},i),s||n.cancelText),o.createElement(b.a,r()({onClick:f},Object(h.a)(u),{size:"small"},a),l||n.okText)))}(w,t)}));return o.createElement(m.a,r()({},T,{prefixCls:w,placement:x,onVisibleChange:function(t){e.disabled||u(t)},visible:i,overlay:Y,overlayClassName:P,ref:t}),Object(g.a)(k,{onKeyDown:function(e){var t,n;o.isValidElement(k)&&(null===(n=null===k||void 0===k?void 0:(t=k.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===d.a.ESC&&i&&u(!1,e)}(e)}}))}));E.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:o.createElement(f.a,null),disabled:!1},t.a=E},555:function(e,t,n){},556:function(e,t,n){},594:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(519);var a=n(518),r=(n(147),n(71)),i=(n(278),n(148)),c=n(257),o=n(0),s=n.n(o),l=function(e,t,n){t(),n&&(console.log("handleSearch-dataIndex:",n),console.log("handleSearch-selectedKeys:",e))},u=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,o=t.selectedKeys,u=t.confirm,f=t.clearFilters;return s.a.createElement("div",{style:{padding:8}},s.a.createElement(i.a,{placeholder:"Search ".concat(e),value:o[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return l(o,u,e)},style:{width:188,marginBottom:8,display:"block"}}),s.a.createElement(a.b,null,s.a.createElement(r.a,{type:"primary",onClick:function(){return l(o,u,e)},icon:s.a.createElement(c.a,null),size:"small",style:{width:90}},"Search"),s.a.createElement(r.a,{onClick:function(){return f()},size:"small",style:{width:90}},"Reset")))},filterIcon:function(e){return s.a.createElement(c.a,{style:{color:e?"#1890ff":void 0}})}}}},603:function(e,t,n){"use strict";t.a=["Andhra Pradesh(AP)","Arunachal Pradesh(AR)","Assam(AS)","Bihar(BR)","Chandigarh","Chhattisgarh(CG)","Dadraand Nagar Haveli(DN)","Daman and Diu(DD)","Delhi(DL)","Goa(GA)","Gujarat(GJ)","Haryana(HR)","Himachal Pradesh(HP)","Jammu and Kashmir(JK)","Jharkhand(JH)","Karnataka(KA)","Kerala(KL)","Madhya Pradesh(MP)","Maharashtra(MH)","Manipur(MN)","Meghalaya(ML)","Nagaland(NL)","Orissa(OR)","Pondicherry(Puducherry)(PY)","Punjab(PB)","Rajasthan(RJ)","Sikkim(SK)","Tamil Nadu(TN)","Tripura(TR)","Telangana","Uttar Pradesh(UP)","Uttarakhand(UK)","West Bengal(WB)"]},606:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(151);var r=n(175);function i(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);