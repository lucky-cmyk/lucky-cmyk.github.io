(this.webpackJsonpruby_rummy_web=this.webpackJsonpruby_rummy_web||[]).push([[39],{1628:function(e,t,n){"use strict";n.r(t);var r=n(72),a=n(3),c=n.n(a),o=n(9),i=n(84),s=n(0),u=n.n(s),l=n(111),f=n(534),d=n(535),p=n(10),m=n(88),b=n(594),g=n(567);t.default=function(e){var t=Object(s.useState)([]),n=Object(i.a)(t,2),a=n[0],y=n[1],v=Object(s.useState)(30),h=Object(i.a)(v,2),O=h[0],x=h[1],j=function(){var e=Object(o.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/user/getProfitRanking",{params:t});case 2:if(0!==(n=e.sent).data.total){e.next=5;break}return e.abrupt("return",y([]));case 5:n&&0===n.code&&(x(0|n.data.total),y(n.data.listdata));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=[Object(r.a)(Object(r.a)({title:"UID",dataIndex:"uid"},Object(b.a)("uid")),{},{render:function(e){return u.a.createElement(m.b,{to:"/user/userInfo?uid=".concat(e)},e)}}),{title:"\u76c8\u5229",dataIndex:"totalAmount",sorter:!0,render:function(e){return Object(g.a)(e)}}];return u.a.createElement(l.a,{title:"\u76c8\u5229\u6392\u884c\u699c"},u.a.createElement(f.a,{rangeSearch:{showTime:!0,rangeDays:3,rangeTime:[Object(d.a)().startOf("day"),Object(d.a)().endOf("day")]},columns:S,fetchApi:j,data:a,total:O}))}},518:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(6),a=n.n(r),c=n(5),o=n.n(c),i=n(16),s=n.n(i),u=n(0),l=n(4),f=n.n(l),d=n(63),p=n(123);function m(e){var t=e.className,n=e.direction,r=e.index,c=e.marginDirection,i=e.children,s=e.split,l=e.wrap,f=u.useContext(g),d=f.horizontalSize,p=f.verticalSize,m=f.latestIndex,b={};return"vertical"===n?r<m&&(b={marginBottom:d/(s?2:1)}):b=a()(a()({},r<m&&o()({},c,d/(s?2:1))),l&&{paddingBottom:p}),null===i||void 0===i?null:u.createElement(u.Fragment,null,u.createElement("div",{className:t,style:b},i),r<m&&s&&u.createElement("span",{className:"".concat(t,"-split"),style:b},s))}var b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},g=u.createContext({latestIndex:0,horizontalSize:0,verticalSize:0}),y={small:8,middle:16,large:24};t.b=function(e){var t,n=u.useContext(p.b),r=n.getPrefixCls,c=n.space,i=n.direction,l=e.size,v=void 0===l?(null===c||void 0===c?void 0:c.size)||"small":l,h=e.align,O=e.className,x=e.children,j=e.direction,S=void 0===j?"horizontal":j,w=e.prefixCls,k=e.split,E=e.style,I=e.wrap,C=void 0!==I&&I,N=b(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),z=u.useMemo((function(){return(Array.isArray(v)?v:[v,v]).map((function(e){return function(e){return"string"===typeof e?y[e]:e||0}(e)}))}),[v]),K=s()(z,2),P=K[0],T=K[1],D=Object(d.a)(x,{keepEmpty:!0});if(0===D.length)return null;var Y=void 0===h&&"horizontal"===S?"center":h,A=r("space",w),_=f()(A,"".concat(A,"-").concat(S),(t={},o()(t,"".concat(A,"-rtl"),"rtl"===i),o()(t,"".concat(A,"-align-").concat(Y),Y),t),O),R="".concat(A,"-item"),M="rtl"===i?"marginLeft":"marginRight",B=0,H=D.map((function(e,t){return null!==e&&void 0!==e&&(B=t),u.createElement(m,{className:R,key:"".concat(R,"-").concat(t),direction:S,index:t,marginDirection:M,split:k,wrap:C},e)}));return u.createElement("div",a()({className:_,style:a()(a()({},C&&{flexWrap:"wrap",marginBottom:-T}),E)},N),u.createElement(g.Provider,{value:{horizontalSize:P,verticalSize:T,latestIndex:B}},H))}},519:function(e,t,n){"use strict";n(55),n(599)},522:function(e,t,n){"use strict";n(55),n(529)},523:function(e,t,n){"use strict";var r=n(6),a=n.n(r),c=n(5),o=n.n(c),i=n(0),s=n(4),u=n.n(s),l=n(123),f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};t.a=function(e){return i.createElement(l.a,null,(function(t){var n,r=t.getPrefixCls,c=t.direction,s=e.prefixCls,l=e.type,d=void 0===l?"horizontal":l,p=e.orientation,m=void 0===p?"center":p,b=e.className,g=e.children,y=e.dashed,v=e.plain,h=f(e,["prefixCls","type","orientation","className","children","dashed","plain"]),O=r("divider",s),x=m.length>0?"-".concat(m):m,j=!!g,S=u()(O,"".concat(O,"-").concat(d),(n={},o()(n,"".concat(O,"-with-text"),j),o()(n,"".concat(O,"-with-text").concat(x),j),o()(n,"".concat(O,"-dashed"),!!y),o()(n,"".concat(O,"-plain"),!!v),o()(n,"".concat(O,"-rtl"),"rtl"===c),n),b);return i.createElement("div",a()({className:S},h,{role:"separator"}),g&&i.createElement("span",{className:"".concat(O,"-inner-text")},g))}))}},529:function(e,t,n){},534:function(e,t,n){"use strict";n(547);var r=n(546),a=(n(519),n(518)),c=(n(522),n(523)),o=(n(147),n(71)),i=n(3),s=n.n(i),u=n(9),l=n(72),f=n(84),d=n(0),p=n.n(d),m=n(280).a.RangePicker;t.a=Object(d.memo)((function(e){var t=e.fetchApi,n=e.columns,i=e.forceUpdate,b=e.data,g=e.rangeSearch,y=e.components,v=e.current,h=e.total,O=e.pageSize,x=e.showTotal,j=e.rowSelection,S=g&&g.rangeTime?[g.rangeTime[0].format(g.layout||"YYYY-MM-DD HH:mm:ss"),g.rangeTime[1].format(g.layout||"YYYY-MM-DD HH:mm:ss")]:null,w=Object(d.useState)(!1),k=Object(f.a)(w,2),E=k[0],I=k[1],C=Object(d.useState)({current:1,pageSize:O||20,total:h||1e5,showTotal:x}),N=Object(f.a)(C,2),z=N[0],K=N[1],P=Object(d.useState)({}),T=Object(f.a)(P,2),D=T[0],Y=T[1],A=Object(d.useState)([]),_=Object(f.a)(A,2),R=_[0],M=_[1],B=Object(d.useState)(S),H=Object(f.a)(B,2),J=H[0],U=H[1],F=Object(d.useState)(!J),G=Object(f.a)(F,2),L=G[0],V=G[1],W=Object(d.useState)(g?g.rangeTime||[]:null),q=Object(f.a)(W,2),Q=q[0],X=q[1],Z=b.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{key:t+1})})),$=function(){var e=Object(u.a)(s.a.mark((function e(n,r,a){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),c={page:n.current,pageSize:n.pageSize,filters:r},J&&(c.startTime=J[0],c.endTime=J[1]),a.length>0&&(c.sorter=a[0]),console.log("rangeTime",J,c),e.next=7,t(c);case 7:I(!1);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){K(Object(l.a)(Object(l.a)({},z),{},{total:h||1e4}))}),[h]),Object(d.useEffect)((function(){$(z,D,R),v&&v(z)}),[D,i,R,O,z.current]),p.a.createElement(p.a.Fragment,null,g&&p.a.createElement(a.b,null,p.a.createElement(m,{disabledDate:function(e){if(!Q||0===Q.length||!g||!g.rangeDays)return!1;var t=Q[0]&&e.diff(Q[0],"days")>=g.rangeDays;return Q[1]&&Q[1].diff(e,"days")>=g.rangeDays||t},defaultValue:g.rangeTime||null,format:g.layout||"YYYY-MM-DD HH:mm:ss",showTime:g.showTime||!1,onChange:function(e,t){U(t),V(!e)},onCalendarChange:function(e){return X(e)}}),p.a.createElement(o.a,{type:"primary",onClick:function(){return $(z,D,R)},disabled:L},"Inquire"),p.a.createElement(c.a,{dashed:!0})),p.a.createElement(r.a,{rowSelection:j,components:y,scroll:{x:!0},bordered:!0,loading:E,pagination:z,columns:n,dataSource:Z,onChange:function(e,t,n){console.log("handleTableChange:",e,t,n),K(e),Y(t),n.order?M([{key:n.columnKey,order:"ascend"===n.order?"asc":"desc"}]):M([])}}))}),(function(e,t){return JSON.stringify(e.data)===JSON.stringify(t.data)&&JSON.stringify(e.columns)===JSON.stringify(t.columns)&&e.forceUpdate==t.forceUpdate}))},535:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(85),a=n.n(r),c=n(548);a.a.extend(c);var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return a.a.unix(e).utc().utcOffset(330).format(t)};t.a=a.a},545:function(e,t){},552:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function e(t,n){var r,a=0,c=[],o=sessionStorage;for(r in o)0===r.indexOf("pic_")&&(c.push(r),a+=o.getItem(r).length);(a/1024).toFixed(2)>500&&c.length>0&&(sessionStorage.removeItem(c[0]),e(t,n)),sessionStorage.setItem("pic_"+t,n)},a=function(e){return sessionStorage.getItem("pic_"+e)}},567:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return b}));var r=n(3),a=n.n(r),c=n(9),o=n(598),i=n(569),s=(n(0),n(552)),u=n(56),l=u.a.getState().cdnUrl,f=u.a.getState().s3Enable,d=function(e){return e/100||0},p=function(e){return o.a[e]||""},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Number(100*e).toFixed(t);return n+="%"},b=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,o,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if("http"!==t.substr(0,4)){e.next=4;break}return e.abrupt("return",t);case 4:if(f){e.next=6;break}return e.abrupt("return",l+"/"+t);case 6:if(!(r=Object(s.b)(t))){e.next=9;break}return e.abrupt("return",r);case 9:return c=t,o=null,e.prev=11,e.next=14,Object(i.b)(c,n);case 14:o=e.sent,e.next=21;break;case 17:e.prev=17,e.t0=e.catch(11),o=null,console.error("download failed ,"+e.t0);case 21:if(null!=o){e.next=23;break}return e.abrupt("return","");case 23:return u=t.substr(t.lastIndexOf(".")+1),d="data:image/"+u+";base64,"+g(o),Object(s.a)(t,d),e.abrupt("return",d);case 27:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(t,n){return e.apply(this,arguments)}}();function g(e){var t=e.reduce((function(e,t){return e+String.fromCharCode(t)}),"");return btoa(t).replace(/.{76}(?=.)/g,"$&\n")}},569:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return S}));n(173);var r=n(110),a=n(3),c=n.n(a),o=n(9),i=n(10),s=n(85),u=n.n(s),l=n(609),f=n.n(l);var d=function(e){return f.a.MD5(e).toString()},p=n(56),m=n(552),b=n(548);u.a.extend(b);var g=n(611),y=(n(612),p.a.getState().s3Enable);function v(e){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/user/awssts",{params:t});case 2:return n=e.sent,r=n.data,a={region:r.region,accessKeyId:r.access_key_id,secretAccessKey:r.secret_access_key,session_token:r.session_token,bucket:r.bucket,appName:r.app_name,acl:r.acl},e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}g.config.update({region:"ap-southeast-1",accessKeyId:"ASIAS2REQI3OBOWXO6R2",secretAccessKey:"YKvObUARB+Ik4wcjmHYGn7M2PR/dV8RZ6/GoAIo8"});new g.S3;function O(e,t){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(c.a.mark((function e(t,n){var r,a,o,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>2&&void 0!==i[2]?i[2]:"",a=Object(m.b)("accessKeyId"),o=JSON.parse(a)){e.next=8;break}return e.next=6,v(n);case 6:o=e.sent,Object(m.a)("accessKeyId",JSON.stringify(o));case 8:return-1!==t.indexOf("poker")&&o.appName&&(t=o.appName+t),g.config.update({region:o.region,accessKeyId:o.accessKeyId,secretAccessKey:o.secretAccessKey}),g.config.credentials.sessionToken=o.session_token,e.abrupt("return",new Promise((function(e,n){var a={Bucket:o.bucket,Key:r+t};(new g.S3).getObject(a,(function(t,r){t&&n(t),r&&e(r.Body)}))})));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(){var e=Object(o.a)(c.a.mark((function e(t,n,r){var a,o,i,s,l,f,p=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:"",e.next=3,v({appid:r});case 3:return o=e.sent,g.config.update({region:o.region,accessKeyId:o.accessKeyId,secretAccessKey:o.secretAccessKey}),i=n.lastIndexOf("."),s=n.substr(i),l=n.substr(0,i),f=o.appName+"/images/"+a+u.a.utc().unix()+d(l)+s,g.config.credentials.sessionToken=o.session_token,e.abrupt("return",new Promise((function(e,n){var r={Bucket:o.bucket,Key:f,Body:t,ACL:o.acl};(new g.S3).upload(r,null,(function(t,r){t?n(t):e(f)}))})));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function S(e,t,n){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(c.a.mark((function e(t,n,a){var o,i,s=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=s.length>3&&void 0!==s[3]?s[3]:"",y){e.next=3;break}return e.abrupt("return","false");case 3:return i=null,e.prev=4,e.next=7,j(t,n,a,o);case 7:i=e.sent,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),console.error(e.t0),r.b.error("upload failed");case 14:return e.prev=14,e.finish(14);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,null,[[4,10,14,16]])})))).apply(this,arguments)}},594:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(519);var r=n(518),a=(n(147),n(71)),c=(n(278),n(148)),o=n(257),i=n(0),s=n.n(i),u=function(e,t,n){t(),n&&(console.log("handleSearch-dataIndex:",n),console.log("handleSearch-selectedKeys:",e))},l=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,i=t.selectedKeys,l=t.confirm,f=t.clearFilters;return s.a.createElement("div",{style:{padding:8}},s.a.createElement(c.a,{placeholder:"Search ".concat(e),value:i[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return u(i,l,e)},style:{width:188,marginBottom:8,display:"block"}}),s.a.createElement(r.b,null,s.a.createElement(a.a,{type:"primary",onClick:function(){return u(i,l,e)},icon:s.a.createElement(o.a,null),size:"small",style:{width:90}},"Search"),s.a.createElement(a.a,{onClick:function(){return f()},size:"small",style:{width:90}},"Reset")))},filterIcon:function(e){return s.a.createElement(o.a,{style:{color:e?"#1890ff":void 0}})}}}},598:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),t.a={1:"Points Rummy",2:"Pool Rummy",3:"Ten Cards"};var r=[{ttype:1,name:"Points Rummy"},{ttype:2,name:"Pool Rummy"},{ttype:3,name:"Ten Cards"}]},599:function(e,t,n){},610:function(e,t){}}]);