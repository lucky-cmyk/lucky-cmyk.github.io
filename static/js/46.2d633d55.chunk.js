(this.webpackJsonpruby_rummy_web=this.webpackJsonpruby_rummy_web||[]).push([[46],{1623:function(e,t,n){"use strict";n.r(t);n(547);var a=n(546),r=(n(519),n(518)),i=(n(278),n(148)),c=(n(533),n(532)),l=n(190),o=(n(550),n(551)),u=(n(147),n(71)),s=n(606),d=(n(173),n(110)),f=n(3),p=n.n(f),m=n(72),b=n(9),v=(n(279),n(86)),y=n(84),h=n(0),O=n.n(h),g=n(111),x=n(614),E=n(87),j=["editing","dataIndex","title","inputType","record","index","children"];t.default=function(e){var t=Object(h.useState)([]),n=Object(y.a)(t,2),f=n[0],k=n[1],C=Object(h.useState)(""),w=Object(y.a)(C,2),I=w[0],S=w[1],P=Object(h.useState)(null),z=Object(y.a)(P,2),N=z[0],V=z[1],T=v.a.useForm(),A=Object(y.a)(T,1)[0],F=function(e){return e.key===I},B=function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(t),e.next=3,Object(E.xb)({appid:t});case 3:n=e.sent,console.log("\u5f00\u5173\u6570\u636e\uff1a",n),a=n.map((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{key:e.id})})),k(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){A.setFieldsValue(Object(m.a)({title:"",name:"",ver:"",value:""},e)),S(e.key)},_=function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a,r,i,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\u4fdd\u5b58key:",t),e.prev=1,e.next=4,A.validateFields();case 4:if(n=e.sent,99999!==t){e.next=12;break}return e.next=8,Object(E.G)(N,n);case 8:a=e.sent,n.id=a.id,e.next=20;break;case 12:return console.log("\u4fee\u6539:",t),n.id=parseInt(t),e.next=16,Object(E.Y)(N,n);case 16:if(0===(r=e.sent).code){e.next=20;break}return d.b.error(r.err),e.abrupt("return");case 20:i=Object(s.a)(f),c=i.findIndex((function(e){return t===e.key})),n.key=n.id,c>-1?(l=i[c],i.splice(c,1,Object(m.a)(Object(m.a)({},l),n)),k(i),S("")):(i.push(n),k(i),S("")),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1),console.log("Validate Failed:",e.t0);case 29:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(s.a)(f);99999===e[e.length-1].key&&(e.pop(),k(e)),S("")},J=function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.S)({id:t});case 2:if(n=e.sent,console.log("\u5220\u9664\u5f00\u5173\u8fd4\u56de:",n),0===n.code){e.next=7;break}return d.b.error(n.err),e.abrupt("return");case 7:a=Object(s.a)(f),k(a.filter((function(e){return e.id!==t})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=[{title:"Id",dataIndex:"id"},{title:"Title",dataIndex:"title",editable:!0},{title:"Field name",dataIndex:"name",editable:!0},{title:"Version",dataIndex:"ver",editable:!0},{title:"Value",dataIndex:"value",editable:!0},{title:"",dataIndex:"operation",render:function(e,t,n){return F(t)?O.a.createElement("span",null,O.a.createElement(u.a,{type:"link",onClick:function(){return _(t.key)}},"Save"),O.a.createElement(u.a,{type:"link",onClick:G},"Cannel")):O.a.createElement("span",null,O.a.createElement(u.a,{type:"link",onClick:function(){return D(t)}},"Edit"),O.a.createElement(o.a,{title:"Sure to delete?",onConfirm:function(){return J(t.id)}},O.a.createElement(u.a,{type:"link"},"Delete")))}}].map((function(e){return e.editable?Object(m.a)(Object(m.a)({},e),{},{onCell:function(t){return{record:t,inputType:"text",dataIndex:e.dataIndex,title:e.title,editing:F(t)}}}):e}));return O.a.createElement(g.a,{title:"Game switch"},O.a.createElement(r.b,null,O.a.createElement(x.a,{handleChange:function(e){return B(e)}}),O.a.createElement(u.a,{type:"primary",onClick:function(){if(null!=N)if(""===I){var e={key:99999};k([].concat(Object(s.a)(f),[e])),D(e)}else d.b.error("Please save the config");else d.b.error("Please choose channel")}},"Add switch"),O.a.createElement(u.a,{type:"primary",danger:!0,onClick:function(){null!=N?""===I?console.log("sync the config",f):d.b.error("Please save the config"):d.b.error("Please choose channel")}},"synConfig")),O.a.createElement(v.a,{form:A,component:!1},O.a.createElement(a.a,{components:{body:{cell:function(e){var t,n=e.editing,a=e.dataIndex,r=e.title,o=(e.inputType,e.record,e.index,e.children),u=Object(l.a)(e,j);return t="value"===a?O.a.createElement(c.a,{style:{width:120}},O.a.createElement(c.a.Option,{value:"true"},"true"),O.a.createElement(c.a.Option,{value:"false"},"false")):O.a.createElement(i.a,null),O.a.createElement("td",u,n?O.a.createElement(v.a.Item,{name:a,style:{margin:0},rules:[{required:!0,message:"Please Input ".concat(r,"!")}]},t):o)}}},dataSource:f,columns:K,bordered:!0})))}},518:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(6),r=n.n(a),i=n(5),c=n.n(i),l=n(16),o=n.n(l),u=n(0),s=n(4),d=n.n(s),f=n(63),p=n(123);function m(e){var t=e.className,n=e.direction,a=e.index,i=e.marginDirection,l=e.children,o=e.split,s=e.wrap,d=u.useContext(v),f=d.horizontalSize,p=d.verticalSize,m=d.latestIndex,b={};return"vertical"===n?a<m&&(b={marginBottom:f/(o?2:1)}):b=r()(r()({},a<m&&c()({},i,f/(o?2:1))),s&&{paddingBottom:p}),null===l||void 0===l?null:u.createElement(u.Fragment,null,u.createElement("div",{className:t,style:b},l),a<m&&o&&u.createElement("span",{className:"".concat(t,"-split"),style:b},o))}var b=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},v=u.createContext({latestIndex:0,horizontalSize:0,verticalSize:0}),y={small:8,middle:16,large:24};t.b=function(e){var t,n=u.useContext(p.b),a=n.getPrefixCls,i=n.space,l=n.direction,s=e.size,h=void 0===s?(null===i||void 0===i?void 0:i.size)||"small":s,O=e.align,g=e.className,x=e.children,E=e.direction,j=void 0===E?"horizontal":E,k=e.prefixCls,C=e.split,w=e.style,I=e.wrap,S=void 0!==I&&I,P=b(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),z=u.useMemo((function(){return(Array.isArray(h)?h:[h,h]).map((function(e){return function(e){return"string"===typeof e?y[e]:e||0}(e)}))}),[h]),N=o()(z,2),V=N[0],T=N[1],A=Object(f.a)(x,{keepEmpty:!0});if(0===A.length)return null;var F=void 0===O&&"horizontal"===j?"center":O,B=a("space",k),D=d()(B,"".concat(B,"-").concat(j),(t={},c()(t,"".concat(B,"-rtl"),"rtl"===l),c()(t,"".concat(B,"-align-").concat(F),F),t),g),_="".concat(B,"-item"),G="rtl"===l?"marginLeft":"marginRight",J=0,K=A.map((function(e,t){return null!==e&&void 0!==e&&(J=t),u.createElement(m,{className:_,key:"".concat(_,"-").concat(t),direction:j,index:t,marginDirection:G,split:C,wrap:S},e)}));return u.createElement("div",r()({className:D,style:r()(r()({},S&&{flexWrap:"wrap",marginBottom:-T}),w)},P),u.createElement(v.Provider,{value:{horizontalSize:V,verticalSize:T,latestIndex:J}},K))}},519:function(e,t,n){"use strict";n(55),n(599)},544:function(e,t,n){"use strict";n(55),n(555)},549:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return e?"function"===typeof e?e():e:null}},550:function(e,t,n){"use strict";n(55),n(544),n(147),n(556)},551:function(e,t,n){"use strict";var a=n(6),r=n.n(a),i=n(16),c=n.n(i),l=n(0),o=n(4),u=n.n(o),s=n(100),d=n.n(s),f=n(14),p=n(113),m=n(71),b=n(176),v=n(112),y=n(114),h=n(123),O=n(549),g=n(26),x=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},E=l.forwardRef((function(e,t){var n=l.useState(e.visible),a=c()(n,2),i=a[0],o=a[1];l.useEffect((function(){"visible"in e&&o(e.visible)}),[e.visible]),l.useEffect((function(){"defaultVisible"in e&&o(e.defaultVisible)}),[e.defaultVisible]);var s=function(t,n){"visible"in e||o(t),e.onVisibleChange&&e.onVisibleChange(t,n)},d=function(t){s(!1,t),e.onConfirm&&e.onConfirm.call(void 0,t)},E=function(t){s(!1,t),e.onCancel&&e.onCancel.call(void 0,t)},j=l.useContext(h.b).getPrefixCls,k=e.prefixCls,C=e.placement,w=e.children,I=e.overlayClassName,S=x(e,["prefixCls","placement","children","overlayClassName"]),P=j("popover",k),z=j("popconfirm",k),N=u()(z,I),V=l.createElement(v.a,{componentName:"Popconfirm",defaultLocale:y.a.Popconfirm},(function(t){return function(t,n){var a=e.okButtonProps,i=e.cancelButtonProps,c=e.title,o=e.cancelText,u=e.okText,s=e.okType,f=e.icon;return l.createElement("div",{className:"".concat(t,"-inner-content")},l.createElement("div",{className:"".concat(t,"-message")},f,l.createElement("div",{className:"".concat(t,"-message-title")},Object(O.a)(c))),l.createElement("div",{className:"".concat(t,"-buttons")},l.createElement(m.a,r()({onClick:E,size:"small"},i),o||n.cancelText),l.createElement(m.a,r()({onClick:d},Object(b.a)(s),{size:"small"},a),u||n.okText)))}(P,t)}));return l.createElement(p.a,r()({},S,{prefixCls:P,placement:C,onVisibleChange:function(t){e.disabled||s(t)},visible:i,overlay:V,overlayClassName:N,ref:t}),Object(g.a)(w,{onKeyDown:function(e){var t,n;l.isValidElement(w)&&(null===(n=null===w||void 0===w?void 0:(t=w.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===f.a.ESC&&i&&s(!1,e)}(e)}}))}));E.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:l.createElement(d.a,null),disabled:!1},t.a=E},555:function(e,t,n){},556:function(e,t,n){},599:function(e,t,n){},606:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(151);var r=n(175);function i(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},614:function(e,t,n){"use strict";n(533);var a=n(532),r=n(0),i=n.n(r),c=n(51),l=a.a.Option;t.a=function(e){var t=e.handleChange,n=Object(c.c)((function(e){return e.appids}));return i.a.createElement("div",{style:{padding:"10px 0"}},i.a.createElement(a.a,{defaultValue:"Choose a channel...",style:{width:300},onChange:t,loading:n.length<1},n.map((function(e){return i.a.createElement(l,{key:e.id,value:e.appid},e.appName)}))))}}}]);