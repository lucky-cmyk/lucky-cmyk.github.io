(this.webpackJsonpruby_rummy_web=this.webpackJsonpruby_rummy_web||[]).push([[46],{1547:function(e,t,n){"use strict";n.r(t);n(558);var a=n(557),r=(n(530),n(529)),c=(n(304),n(157)),i=(n(544),n(543)),l=n(206),o=(n(561),n(562)),u=(n(156),n(61)),s=n(617),d=(n(182),n(80)),p=n(4),f=n.n(p),m=n(62),b=n(8),v=(n(305),n(82)),y=n(79),O=n(0),j=n.n(O),h=n(116),x=n(625),g=n(85);t.default=function(e){var t=Object(O.useState)([]),n=Object(y.a)(t,2),p=n[0],E=n[1],k=Object(O.useState)(""),C=Object(y.a)(k,2),w=C[0],I=C[1],S=Object(O.useState)(null),P=Object(y.a)(S,2),N=P[0],z=P[1],T=v.a.useForm(),V=Object(y.a)(T,1)[0],A=function(e){return e.key===w},F=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(t),e.next=3,Object(g.xb)({appid:t});case 3:n=e.sent,console.log("\u5f00\u5173\u6570\u636e\uff1a",n),a=n.map((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{key:e.id})})),E(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){V.setFieldsValue(Object(m.a)({title:"",name:"",ver:"",value:""},e)),I(e.key)},D=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,a,r,c,i,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\u4fdd\u5b58key:",t),e.prev=1,e.next=4,V.validateFields();case 4:if(n=e.sent,99999!==t){e.next=12;break}return e.next=8,Object(g.G)(N,n);case 8:a=e.sent,n.id=a.id,e.next=20;break;case 12:return console.log("\u4fee\u6539:",t),n.id=parseInt(t),e.next=16,Object(g.Y)(N,n);case 16:if(0===(r=e.sent).code){e.next=20;break}return d.b.error(r.err),e.abrupt("return");case 20:c=Object(s.a)(p),i=c.findIndex((function(e){return t===e.key})),n.key=n.id,i>-1?(l=c[i],c.splice(i,1,Object(m.a)(Object(m.a)({},l),n)),E(c),I("")):(c.push(n),E(c),I("")),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1),console.log("Validate Failed:",e.t0);case 29:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(s.a)(p);99999===e[e.length-1].key&&(e.pop(),E(e)),I("")},G=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.S)({id:t});case 2:if(n=e.sent,console.log("\u5220\u9664\u5f00\u5173\u8fd4\u56de:",n),0===n.code){e.next=7;break}return d.b.error(n.err),e.abrupt("return");case 7:a=Object(s.a)(p),E(a.filter((function(e){return e.id!==t})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=[{title:"Id",dataIndex:"id"},{title:"Title",dataIndex:"title",editable:!0},{title:"Field name",dataIndex:"name",editable:!0},{title:"Version",dataIndex:"ver",editable:!0},{title:"Value",dataIndex:"value",editable:!0},{title:"",dataIndex:"operation",render:function(e,t,n){return A(t)?j.a.createElement("span",null,j.a.createElement(u.a,{type:"link",onClick:function(){return D(t.key)}},"Save"),j.a.createElement(u.a,{type:"link",onClick:_},"Cannel")):j.a.createElement("span",null,j.a.createElement(u.a,{type:"link",onClick:function(){return B(t)}},"Edit"),j.a.createElement(o.a,{title:"Sure to delete?",onConfirm:function(){return G(t.id)}},j.a.createElement(u.a,{type:"link"},"Delete")))}}].map((function(e){return e.editable?Object(m.a)(Object(m.a)({},e),{},{onCell:function(t){return{record:t,inputType:"text",dataIndex:e.dataIndex,title:e.title,editing:A(t)}}}):e}));return j.a.createElement(h.a,{title:"Game switch"},j.a.createElement(r.b,null,j.a.createElement(x.a,{handleChange:function(e){return F(e)}}),j.a.createElement(u.a,{type:"primary",onClick:function(){if(null!=N)if(""===w){var e={key:99999};E([].concat(Object(s.a)(p),[e])),B(e)}else d.b.error("Please save the config");else d.b.error("Please choose channel")}},"Add switch"),j.a.createElement(u.a,{type:"primary",danger:!0,onClick:function(){null!=N?""===w?console.log("sync the config",p):d.b.error("Please save the config"):d.b.error("Please choose channel")}},"synConfig")),j.a.createElement(v.a,{form:V,component:!1},j.a.createElement(a.a,{components:{body:{cell:function(e){var t,n=e.editing,a=e.dataIndex,r=e.title,o=(e.inputType,e.record,e.index,e.children),u=Object(l.a)(e,["editing","dataIndex","title","inputType","record","index","children"]);return t="value"===a?j.a.createElement(i.a,{style:{width:120}},j.a.createElement(i.a.Option,{value:"true"},"true"),j.a.createElement(i.a.Option,{value:"false"},"false")):j.a.createElement(c.a,null),j.a.createElement("td",u,n?j.a.createElement(v.a.Item,{name:a,style:{margin:0},rules:[{required:!0,message:"Please Input ".concat(r,"!")}]},t):o)}}},dataSource:p,columns:J,bordered:!0})))}},529:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(2),r=n(3),c=n(7),i=n(0),l=n(6),o=n.n(l),u=n(56),s=n(54);function d(e){var t=e.className,n=e.direction,c=e.index,l=e.marginDirection,o=e.children,u=e.split,s=e.wrap,d=i.useContext(f),p=d.horizontalSize,m=d.verticalSize,b=d.latestIndex,v={};return"vertical"===n?c<b&&(v={marginBottom:p/(u?2:1)}):v=Object(a.a)(Object(a.a)({},c<b&&Object(r.a)({},l,p/(u?2:1))),s&&{paddingBottom:m}),null===o||void 0===o?null:i.createElement(i.Fragment,null,i.createElement("div",{className:t,style:v},o),c<b&&u&&i.createElement("span",{className:"".concat(t,"-split"),style:v},u))}var p=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},f=i.createContext({latestIndex:0,horizontalSize:0,verticalSize:0}),m={small:8,middle:16,large:24};t.b=function(e){var t,n=i.useContext(s.b),l=n.getPrefixCls,b=n.space,v=n.direction,y=e.size,O=void 0===y?(null===b||void 0===b?void 0:b.size)||"small":y,j=e.align,h=e.className,x=e.children,g=e.direction,E=void 0===g?"horizontal":g,k=e.prefixCls,C=e.split,w=e.style,I=e.wrap,S=void 0!==I&&I,P=p(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),N=i.useMemo((function(){return(Array.isArray(O)?O:[O,O]).map((function(e){return function(e){return"string"===typeof e?m[e]:e||0}(e)}))}),[O]),z=Object(c.a)(N,2),T=z[0],V=z[1],A=Object(u.a)(x,{keepEmpty:!0});if(0===A.length)return null;var F=void 0===j&&"horizontal"===E?"center":j,B=l("space",k),D=o()(B,"".concat(B,"-").concat(E),(t={},Object(r.a)(t,"".concat(B,"-rtl"),"rtl"===v),Object(r.a)(t,"".concat(B,"-align-").concat(F),F),t),h),_="".concat(B,"-item"),G="rtl"===v?"marginLeft":"marginRight",J=0,K=A.map((function(e,t){return null!==e&&void 0!==e&&(J=t),i.createElement(d,{className:_,key:"".concat(_,"-").concat(t),direction:E,index:t,marginDirection:G,split:C,wrap:S},e)}));return i.createElement("div",Object(a.a)({className:D,style:Object(a.a)(Object(a.a)({},S&&{flexWrap:"wrap",marginBottom:-V}),w)},P),i.createElement(f.Provider,{value:{horizontalSize:T,verticalSize:V,latestIndex:J}},K))}},530:function(e,t,n){"use strict";n(46),n(610)},555:function(e,t,n){"use strict";n(46),n(566)},560:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return e?"function"===typeof e?e():e:null}},561:function(e,t,n){"use strict";n(46),n(555),n(156),n(567)},562:function(e,t,n){"use strict";var a=n(2),r=n(7),c=n(0),i=n(6),l=n.n(i),o=n(32),u=n(87),s=n(16),d=n(117),p=n(61),f=n(185),m=n(84),b=n(68),v=n(54),y=n(560),O=n(21),j=n(118),h=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},x=c.forwardRef((function(e,t){var n=Object(o.a)(!1,{value:e.visible,defaultValue:e.defaultVisible}),i=Object(r.a)(n,2),u=i[0],x=i[1],g=function(t,n){var a;x(t),null===(a=e.onVisibleChange)||void 0===a||a.call(e,t,n)},E=function(t){var n;g(!1,t),null===(n=e.onConfirm)||void 0===n||n.call(void 0,t)},k=function(t){var n;g(!1,t),null===(n=e.onCancel)||void 0===n||n.call(void 0,t)},C=c.useContext(v.b).getPrefixCls,w=e.prefixCls,I=e.placement,S=e.children,P=e.overlayClassName,N=h(e,["prefixCls","placement","children","overlayClassName"]),z=C("popover",w),T=C("popconfirm",w),V=l()(T,P),A=c.createElement(m.a,{componentName:"Popconfirm",defaultLocale:b.a.Popconfirm},(function(t){return function(t,n){var r=e.okButtonProps,i=e.cancelButtonProps,l=e.title,o=e.cancelText,u=e.okText,s=e.okType,d=e.icon;return c.createElement("div",{className:"".concat(t,"-inner-content")},c.createElement("div",{className:"".concat(t,"-message")},d,c.createElement("div",{className:"".concat(t,"-message-title")},Object(y.a)(l))),c.createElement("div",{className:"".concat(t,"-buttons")},c.createElement(p.a,Object(a.a)({onClick:k,size:"small"},i),o||n.cancelText),c.createElement(p.a,Object(a.a)({onClick:E},Object(f.a)(s),{size:"small"},r),u||n.okText)))}(z,t)})),F=C();return c.createElement(d.a,Object(a.a)({},N,{prefixCls:z,placement:I,onVisibleChange:function(t){e.disabled||g(t)},visible:u,overlay:A,overlayClassName:V,ref:t,transitionName:Object(j.b)(F,"zoom-big",e.transitionName)}),Object(O.a)(S,{onKeyDown:function(e){var t,n;c.isValidElement(S)&&(null===(n=null===S||void 0===S?void 0:(t=S.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===s.a.ESC&&u&&g(!1,e)}(e)}}))}));x.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:c.createElement(u.a,null),disabled:!1},t.a=x},566:function(e,t,n){},567:function(e,t,n){},610:function(e,t,n){},617:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(160);var r=n(184);function c(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},625:function(e,t,n){"use strict";n(544);var a=n(543),r=n(0),c=n.n(r),i=n(41),l=a.a.Option;t.a=function(e){var t=e.handleChange,n=Object(i.c)((function(e){return e.appids}));return c.a.createElement("div",{style:{padding:"10px 0"}},c.a.createElement(a.a,{defaultValue:"Choose a channel...",style:{width:300},onChange:t,loading:n.length<1},n.map((function(e){return c.a.createElement(l,{key:e.id,value:e.appid},e.appName)}))))}}}]);