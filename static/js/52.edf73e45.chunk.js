(this.webpackJsonpruby_rummy_web=this.webpackJsonpruby_rummy_web||[]).push([[52],{1336:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var a=n(616),r={},i=function(e){var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;r[i.appid.toString()]=i.appName}}catch(c){n.e(c)}finally{n.f()}},c=function(e){return r[e.toString()]}},1586:function(e,t,n){"use strict";n.r(t);n(558);var a=n(557),r=(n(530),n(529)),i=(n(561),n(562)),c=(n(156),n(61)),o=n(617),l=(n(182),n(80)),u=n(4),s=n.n(u),m=n(62),d=n(8),f=n(79),b=n(0),p=n.n(b),v=n(41),y=n(116),O=n(85),E=n(1336),j=n(625),x=n(81),h=n.n(x),I=(n(553),n(554)),k=(n(305),n(82)),g=(n(304),n(157)),C=(n(544),n(543)),S=C.a.Option,w=g.a.TextArea;var T=function(e){var t=e.data,n=e.visible,a=e.onCancel,i=e.onOk,o=Object(b.useState)([]),l=Object(f.a)(o,2),u=l[0],s=l[1],d=k.a.useForm(),v=Object(f.a)(d,1)[0];return Object(b.useEffect)((function(){s(t)}),[t]),Object(b.useEffect)((function(){console.log("Form data initial",u),v.resetFields()}),[u]),p.a.createElement(I.a,{visible:n,title:"Add Update Config",maskClosable:!1,closable:!1,getContainer:!1,footer:null},p.a.createElement(k.a,{form:v,name:"form_in_modal",initialValues:u},p.a.createElement(k.a.Item,{label:"Status",name:"status"},p.a.createElement(C.a,{style:{width:120}},p.a.createElement(S,{value:"0"},"Enable"),p.a.createElement(S,{value:"1"},"Disable"))),p.a.createElement(k.a.Item,{label:"Is Compulsory",name:"iscompulsory"},p.a.createElement(C.a,{style:{width:120}},p.a.createElement(S,{value:"1"},"Yes"),p.a.createElement(S,{value:"0"},"No"))),p.a.createElement(k.a.Item,{label:"Is Test",name:"istest"},p.a.createElement(C.a,{style:{width:120}},p.a.createElement(S,{value:"1"},"Yes"),p.a.createElement(S,{value:"0"},"No"))),p.a.createElement(k.a.Item,{label:"Test Uid",name:"userids"},p.a.createElement(g.a,{placeholder:"Multiple uid are separated by commas"})),p.a.createElement(k.a.Item,{label:"Version",name:"version",rules:[{required:!0,message:"Input version!"}]},p.a.createElement(g.a,null)),p.a.createElement(k.a.Item,{label:"Versioncode",name:"versioncode",rules:[{required:!0,message:"Input versioncode!"}]},p.a.createElement(g.a,null)),p.a.createElement(k.a.Item,{label:"Url",name:"url",rules:[{required:!0,message:"Input url!"}]},p.a.createElement(g.a,null)),p.a.createElement(k.a.Item,{label:"Remark",name:"remark",rules:[{required:!0,message:"Input remark!"}]},p.a.createElement(w,null)),p.a.createElement(k.a.Item,null,p.a.createElement(r.b,null,p.a.createElement(c.a,{type:"primary",htmlType:"submit",onClick:function(){var e=v.getFieldsValue(),n=Object(m.a)(Object(m.a)({},t),e);i(n)}},"Submit"),p.a.createElement(c.a,{htmlType:"button",onClick:a},"Cannel")))))};t.default=function(){var e=Object(b.useState)([]),t=Object(f.a)(e,2),n=t[0],u=t[1],x=Object(b.useState)(),I=Object(f.a)(x,2),k=I[0],g=I[1],C=Object(b.useState)(!1),S=Object(f.a)(C,2),w=S[0],N=S[1],V=Object(b.useState)([]),A=Object(f.a)(V,2),P=A[0],D=A[1],Y=Object(v.c)((function(e){return e.appids})),U=function(){var e=Object(d.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(t),e.next=3,Object(O.Ab)({appid:t});case 3:n=e.sent,console.log("\u7248\u672c\u66f4\u65b0\u6570\u636e\uff1a",n),a=n.map((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{key:e.id})})),u(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(b.useEffect)((function(){Object(E.b)(Y)}),[Y]);var _=function(){var e=Object(d.a)(s.a.mark((function e(t){var a,r,i,c,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.appid=k,t.iscompulsory=parseInt(t.iscompulsory),t.status=parseInt(t.status),t.istest=parseInt(t.istest),t.versioncode=parseInt(t.versioncode),t.datetime=h()().unix(),!t.id){e.next=22;break}return e.next=9,Object(O.Z)(t);case 9:if(0!==(a=e.sent).code){e.next=18;break}r=Object(o.a)(n),i=r.findIndex((function(e){return t.id===e.id})),c=r[i],r.splice(i,1,Object(m.a)(Object(m.a)({},c),t)),u(r),e.next=20;break;case 18:return l.b.error(a.err),e.abrupt("return");case 20:e.next=31;break;case 22:return e.next=24,Object(O.I)(t);case 24:if(0!==(d=e.sent).code){e.next=29;break}u([].concat(Object(o.a)(n),[Object(m.a)(Object(m.a)({},t),{},{id:d.id,key:d.id})])),e.next=31;break;case 29:return l.b.error(d.err),e.abrupt("return");case 31:N(!1);case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(s.a.mark((function e(t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.T)({id:t});case 2:if(0===(a=e.sent).code){e.next=6;break}return l.b.error(a.err),e.abrupt("return");case 6:r=Object(o.a)(n),u(r.filter((function(e){return e.id!==t})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=[{title:"ID",dataIndex:"id"},{title:"Appid",dataIndex:"appid",render:function(e){return Object(E.a)(e)}},{title:"Status",dataIndex:"status",render:function(e){return"0"===e.toString()?"Enable":"Disable"}},{title:"Is Compulsory",dataIndex:"iscompulsory",render:function(e){return"0"===e.toString()?"No":"Yes"}},{title:"Version",dataIndex:"version"},{title:"Versioncode",dataIndex:"versioncode"},{title:"Add Time",dataIndex:"datetime",render:function(e){return h.a.unix(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"Url",dataIndex:"url"},{title:"Is Test",dataIndex:"istest",render:function(e){return"0"===e.toString()?"No":"Yes"}},{title:"Test Uid",dataIndex:"userids"},{title:"Remark",dataIndex:"remark"},{title:"Operation",dataIndex:"operation",align:"center",render:function(e,t,n){return p.a.createElement("span",null,p.a.createElement(c.a,{type:"link",onClick:function(){return function(e,t){e.status=e.status.toString(),e.iscompulsory=e.iscompulsory.toString(),e.istest=e.istest.toString(),D(e),N(!0)}(t)}},"Edit"),p.a.createElement(i.a,{title:"Sure to delete?",onConfirm:function(){return q(t.id)}},p.a.createElement(c.a,{type:"link"},"Delete")))}}];return p.a.createElement(y.a,{title:"Version Update"},p.a.createElement(r.b,{direction:"vertical"},p.a.createElement(r.b,null,p.a.createElement(j.a,{handleChange:function(e){return U(e)}}),p.a.createElement(c.a,{type:"primary",onClick:function(){null!=k?(D({status:"0",iscompulsory:"0",istest:"0"}),N(!0)):l.b.error("Please choose channel")}},"Add Config")),p.a.createElement(a.a,{columns:F,dataSource:n,bordered:!0})),p.a.createElement(T,{data:P,visible:w,onOk:_,onCancel:function(){N(!1)}}))}},555:function(e,t,n){"use strict";n(46),n(566)},560:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return e?"function"===typeof e?e():e:null}},561:function(e,t,n){"use strict";n(46),n(555),n(156),n(567)},562:function(e,t,n){"use strict";var a=n(2),r=n(7),i=n(0),c=n(6),o=n.n(c),l=n(32),u=n(87),s=n(16),m=n(117),d=n(61),f=n(185),b=n(84),p=n(68),v=n(54),y=n(560),O=n(21),E=n(118),j=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},x=i.forwardRef((function(e,t){var n=Object(l.a)(!1,{value:e.visible,defaultValue:e.defaultVisible}),c=Object(r.a)(n,2),u=c[0],x=c[1],h=function(t,n){var a;x(t),null===(a=e.onVisibleChange)||void 0===a||a.call(e,t,n)},I=function(t){var n;h(!1,t),null===(n=e.onConfirm)||void 0===n||n.call(void 0,t)},k=function(t){var n;h(!1,t),null===(n=e.onCancel)||void 0===n||n.call(void 0,t)},g=i.useContext(v.b).getPrefixCls,C=e.prefixCls,S=e.placement,w=e.children,T=e.overlayClassName,N=j(e,["prefixCls","placement","children","overlayClassName"]),V=g("popover",C),A=g("popconfirm",C),P=o()(A,T),D=i.createElement(b.a,{componentName:"Popconfirm",defaultLocale:p.a.Popconfirm},(function(t){return function(t,n){var r=e.okButtonProps,c=e.cancelButtonProps,o=e.title,l=e.cancelText,u=e.okText,s=e.okType,m=e.icon;return i.createElement("div",{className:"".concat(t,"-inner-content")},i.createElement("div",{className:"".concat(t,"-message")},m,i.createElement("div",{className:"".concat(t,"-message-title")},Object(y.a)(o))),i.createElement("div",{className:"".concat(t,"-buttons")},i.createElement(d.a,Object(a.a)({onClick:k,size:"small"},c),l||n.cancelText),i.createElement(d.a,Object(a.a)({onClick:I},Object(f.a)(s),{size:"small"},r),u||n.okText)))}(V,t)})),Y=g();return i.createElement(m.a,Object(a.a)({},N,{prefixCls:V,placement:S,onVisibleChange:function(t){e.disabled||h(t)},visible:u,overlay:D,overlayClassName:P,ref:t,transitionName:Object(E.b)(Y,"zoom-big",e.transitionName)}),Object(O.a)(w,{onKeyDown:function(e){var t,n;i.isValidElement(w)&&(null===(n=null===w||void 0===w?void 0:(t=w.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===s.a.ESC&&u&&h(!1,e)}(e)}}))}));x.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:i.createElement(u.a,null),disabled:!1},t.a=x},566:function(e,t,n){},567:function(e,t,n){},616:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(184);function r(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(a.a)(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,c=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){o=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(o)throw i}}}}},617:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(160);var r=n(184);function i(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},625:function(e,t,n){"use strict";n(544);var a=n(543),r=n(0),i=n.n(r),c=n(41),o=a.a.Option;t.a=function(e){var t=e.handleChange,n=Object(c.c)((function(e){return e.appids}));return i.a.createElement("div",{style:{padding:"10px 0"}},i.a.createElement(a.a,{defaultValue:"Choose a channel...",style:{width:300},onChange:t,loading:n.length<1},n.map((function(e){return i.a.createElement(o,{key:e.id,value:e.appid},e.appName)}))))}}}]);