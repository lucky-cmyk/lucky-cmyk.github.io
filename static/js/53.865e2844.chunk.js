(this.webpackJsonpruby_rummy_web=this.webpackJsonpruby_rummy_web||[]).push([[53],{1578:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return g}));var a=n(62),r=n(4),i=n.n(r),c=n(8),o=n(79),s=n(0),l=n.n(s),u=n(546),f=n(9),d=n(116),m=n(545),h=n(605),p=n(86),g=function(t){var e=Object(s.useState)({total:0,data:[]}),n=Object(o.a)(e,2),r=n[0],g=n[1],O=function(){var t=Object(c.a)(i.a.mark((function t(e){var n,a,r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("/security/flagLog",{params:e});case 2:if(0===(n=t.sent).code){t.next=5;break}return t.abrupt("return");case 5:a=n.data,r={},a.lastLogin&&a.lastLogin.length>0&&a.lastLogin.map((function(t){r[t.uid]=t.time})),c=[],a.log&&a.log.map((function(t){var e=t.log;e.reg_time=t.user.reg_time,e.uname=t.user.uname,e.last_login=r[t.user.uid],c.push(e)})),g({total:a.total,data:c});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=[{title:"\u5e8f\u53f7",dataIndex:"key"},Object(a.a)(Object(a.a)({title:"UID",dataIndex:"uid",key:"uid"},Object(h.a)("uid")),{},{render:function(t){return l.a.createElement(p.b,{to:"/user/userInfo?uid=".concat(t)},t)}}),{title:"\u6635\u79f0",key:"uname",dataIndex:"uname"},{title:"\u6807\u8bb0\u65f6\u95f4",key:"create_time",dataIndex:"create_time",render:function(t){return u.a.unix(t).utc().utcOffset(330).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u6ce8\u518c\u65f6\u95f4",key:"reg_time",dataIndex:"reg_time",render:function(t){return u.a.unix(t).utc().utcOffset(330).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u6700\u540e\u767b\u5f55\u65f6\u95f4",key:"last_login",dataIndex:"last_login",render:function(t){return u.a.unix(t).utc().utcOffset(330).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u6807\u8bb0\u539f\u56e0",key:"reason",dataIndex:"reason",render:function(t){return{1:"\u8fde\u7eed\u5f03\u724c",2:"\u8fde\u7eed\u8bc8\u80e1",3:"\u8fde\u7eed\u5403\u724c",4:"\u8fde\u7eed\u8d62"}[t]}},{title:"\u5173\u8054UID",key:"with_uid",dataIndex:"with_uid",render:function(t){return l.a.createElement(p.b,{to:"/user/userInfo?uid=".concat(t)},t)}}];return l.a.createElement(d.a,{title:"\u5f02\u5e38\u7528\u6237\u540d\u5355"},l.a.createElement(m.a,{columns:b,fetchApi:O,data:r.data,total:r.total,pageSize:20,rangeSearch:{showTime:!0},showTotal:function(t,e){return"\u7b2c".concat(e[0],"-").concat(e[1],"\u6761, \u5171").concat(t,"\u6761\u6570\u636e")}}))}},529:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var a=n(2),r=n(3),i=n(7),c=n(0),o=n(6),s=n.n(o),l=n(56),u=n(54);function f(t){var e=t.className,n=t.direction,i=t.index,o=t.marginDirection,s=t.children,l=t.split,u=t.wrap,f=c.useContext(m),d=f.horizontalSize,h=f.verticalSize,p=f.latestIndex,g={};return"vertical"===n?i<p&&(g={marginBottom:d/(l?2:1)}):g=Object(a.a)(Object(a.a)({},i<p&&Object(r.a)({},o,d/(l?2:1))),u&&{paddingBottom:h}),null===s||void 0===s?null:c.createElement(c.Fragment,null,c.createElement("div",{className:e,style:g},s),i<p&&l&&c.createElement("span",{className:"".concat(e,"-split"),style:g},l))}var d=function(t,e){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(t);r<a.length;r++)e.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(n[a[r]]=t[a[r]])}return n},m=c.createContext({latestIndex:0,horizontalSize:0,verticalSize:0}),h={small:8,middle:16,large:24};e.b=function(t){var e,n=c.useContext(u.b),o=n.getPrefixCls,p=n.space,g=n.direction,O=t.size,b=void 0===O?(null===p||void 0===p?void 0:p.size)||"small":O,y=t.align,v=t.className,j=t.children,S=t.direction,x=void 0===S?"horizontal":S,D=t.prefixCls,$=t.split,w=t.style,Y=t.wrap,E=void 0!==Y&&Y,C=d(t,["size","align","className","children","direction","prefixCls","split","style","wrap"]),T=c.useMemo((function(){return(Array.isArray(b)?b:[b,b]).map((function(t){return function(t){return"string"===typeof t?h[t]:t||0}(t)}))}),[b]),z=Object(i.a)(T,2),M=z[0],k=z[1],I=Object(l.a)(j,{keepEmpty:!0});if(0===I.length)return null;var H=void 0===y&&"horizontal"===x?"center":y,N=o("space",D),U=s()(N,"".concat(N,"-").concat(x),(e={},Object(r.a)(e,"".concat(N,"-rtl"),"rtl"===g),Object(r.a)(e,"".concat(N,"-align-").concat(H),H),e),v),_="".concat(N,"-item"),P="rtl"===g?"marginLeft":"marginRight",L=0,J=I.map((function(t,e){return null!==t&&void 0!==t&&(L=e),c.createElement(f,{className:_,key:"".concat(_,"-").concat(e),direction:x,index:e,marginDirection:P,split:$,wrap:E},t)}));return c.createElement("div",Object(a.a)({className:U,style:Object(a.a)(Object(a.a)({},E&&{flexWrap:"wrap",marginBottom:-k}),w)},C),c.createElement(m.Provider,{value:{horizontalSize:M,verticalSize:k,latestIndex:L}},J))}},530:function(t,e,n){"use strict";n(46),n(610)},533:function(t,e,n){"use strict";n(46),n(540)},534:function(t,e,n){"use strict";var a=n(2),r=n(3),i=n(0),c=n(6),o=n.n(c),s=n(54),l=function(t,e){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(t);r<a.length;r++)e.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(n[a[r]]=t[a[r]])}return n};e.a=function(t){return i.createElement(s.a,null,(function(e){var n,c=e.getPrefixCls,s=e.direction,u=t.prefixCls,f=t.type,d=void 0===f?"horizontal":f,m=t.orientation,h=void 0===m?"center":m,p=t.className,g=t.children,O=t.dashed,b=t.plain,y=l(t,["prefixCls","type","orientation","className","children","dashed","plain"]),v=c("divider",u),j=h.length>0?"-".concat(h):h,S=!!g,x=o()(v,"".concat(v,"-").concat(d),(n={},Object(r.a)(n,"".concat(v,"-with-text"),S),Object(r.a)(n,"".concat(v,"-with-text").concat(j),S),Object(r.a)(n,"".concat(v,"-dashed"),!!O),Object(r.a)(n,"".concat(v,"-plain"),!!b),Object(r.a)(n,"".concat(v,"-rtl"),"rtl"===s),n),p);return i.createElement("div",Object(a.a)({className:x},y,{role:"separator"}),g&&i.createElement("span",{className:"".concat(v,"-inner-text")},g))}))}},540:function(t,e,n){},545:function(t,e,n){"use strict";n(558);var a=n(557),r=(n(530),n(529)),i=(n(533),n(534)),c=(n(156),n(61)),o=n(4),s=n.n(o),l=n(8),u=n(62),f=n(79),d=n(0),m=n.n(d),h=n(306).a.RangePicker;e.a=Object(d.memo)((function(t){var e=t.fetchApi,n=t.columns,o=t.forceUpdate,p=t.data,g=t.rangeSearch,O=t.components,b=t.current,y=t.total,v=t.pageSize,j=t.showTotal,S=t.rowSelection,x=g&&g.rangeTime?[g.rangeTime[0].format(g.layout||"YYYY-MM-DD HH:mm:ss"),g.rangeTime[1].format(g.layout||"YYYY-MM-DD HH:mm:ss")]:null,D=Object(d.useState)(!1),$=Object(f.a)(D,2),w=$[0],Y=$[1],E=Object(d.useState)({current:1,pageSize:v||20,total:y||1e5,showTotal:j}),C=Object(f.a)(E,2),T=C[0],z=C[1],M=Object(d.useState)({}),k=Object(f.a)(M,2),I=k[0],H=k[1],N=Object(d.useState)([]),U=Object(f.a)(N,2),_=U[0],P=U[1],L=Object(d.useState)(x),J=Object(f.a)(L,2),A=J[0],B=J[1],F=Object(d.useState)(!A),K=Object(f.a)(F,2),R=K[0],W=K[1],q=Object(d.useState)(g?g.rangeTime||[]:null),V=Object(f.a)(q,2),Z=V[0],G=V[1],Q=p.map((function(t,e){return Object(u.a)(Object(u.a)({},t),{},{key:e+1})})),X=function(){var t=Object(l.a)(s.a.mark((function t(n,a,r){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Y(!0),i={page:n.current,pageSize:n.pageSize,filters:a},A&&(i.startTime=A[0],i.endTime=A[1]),r.length>0&&(i.sorter=r[0]),console.log("rangeTime",A,i),t.next=7,e(i);case 7:Y(!1);case 8:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}();return Object(d.useEffect)((function(){z(Object(u.a)(Object(u.a)({},T),{},{total:y||1e4}))}),[y]),Object(d.useEffect)((function(){X(T,I,_),b&&b(T)}),[I,o,_,v,T.current]),m.a.createElement(m.a.Fragment,null,g&&m.a.createElement(r.b,null,m.a.createElement(h,{disabledDate:function(t){if(!Z||0===Z.length||!g||!g.rangeDays)return!1;var e=Z[0]&&t.diff(Z[0],"days")>=g.rangeDays;return Z[1]&&Z[1].diff(t,"days")>=g.rangeDays||e},defaultValue:g.rangeTime||null,format:g.layout||"YYYY-MM-DD HH:mm:ss",showTime:g.showTime||!1,onChange:function(t,e){B(e),W(!t)},onCalendarChange:function(t){return G(t)}}),m.a.createElement(c.a,{type:"primary",onClick:function(){return X(T,I,_)},disabled:R},"Inquire"),m.a.createElement(i.a,{dashed:!0})),m.a.createElement(a.a,{rowSelection:S,components:O,scroll:{x:!0},bordered:!0,loading:w,pagination:T,columns:n,dataSource:Q,onChange:function(t,e,n){console.log("handleTableChange:",t,e,n),z(t),H(e),n.order?P([{key:n.columnKey,order:"ascend"===n.order?"asc":"desc"}]):P([])}}))}),(function(t,e){return JSON.stringify(t.data)===JSON.stringify(e.data)&&JSON.stringify(t.columns)===JSON.stringify(e.columns)&&t.forceUpdate==e.forceUpdate}))},546:function(t,e,n){"use strict";n.d(e,"b",(function(){return c}));var a=n(81),r=n.n(a),i=n(559);r.a.extend(i);var c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return r.a.unix(t).utc().utcOffset(330).format(e)};e.a=r.a},559:function(t,e,n){t.exports=function(){"use strict";return function(t,e,n){var a=e.prototype;n.utc=function(t){return new e({date:t,utc:!0,args:arguments})},a.utc=function(t){var e=n(this.toDate(),{locale:this.$L,utc:!0});return t?e.add(this.utcOffset(),"minute"):e},a.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var r=a.parse;a.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),r.call(this,t)};var i=a.init;a.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else i.call(this)};var c=a.utcOffset;a.utcOffset=function(t,e){var n=this.$utils().u;if(n(t))return this.$u?0:n(this.$offset)?c.call(this):this.$offset;var a=Math.abs(t)<=16?60*t:t,r=this;if(e)return r.$offset=a,r.$u=0===t,r;if(0!==t){var i=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(r=this.local().add(a+i,"minute")).$offset=a,r.$x.$localOffset=i}else r=this.utc();return r};var o=a.format;a.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return o.call(this,e)},a.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*t},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var s=a.toDate;a.toDate=function(t){return"s"===t&&this.$offset?n(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():s.call(this)};var l=a.diff;a.diff=function(t,e,a){if(t&&this.$u===t.$u)return l.call(this,t,e,a);var r=this.local(),i=n(t).local();return l.call(r,i,e,a)}}}()},605:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n(530);var a=n(529),r=(n(156),n(61)),i=(n(304),n(157)),c=n(138),o=n(0),s=n.n(o),l=function(t,e,n){e(),n&&(console.log("handleSearch-dataIndex:",n),console.log("handleSearch-selectedKeys:",t))},u=function(t){return{filterDropdown:function(e){var n=e.setSelectedKeys,o=e.selectedKeys,u=e.confirm,f=e.clearFilters;return s.a.createElement("div",{style:{padding:8}},s.a.createElement(i.a,{placeholder:"Search ".concat(t),value:o[0],onChange:function(t){return n(t.target.value?[t.target.value]:[])},onPressEnter:function(){return l(o,u,t)},style:{width:188,marginBottom:8,display:"block"}}),s.a.createElement(a.b,null,s.a.createElement(r.a,{type:"primary",onClick:function(){return l(o,u,t)},icon:s.a.createElement(c.a,null),size:"small",style:{width:90}},"Search"),s.a.createElement(r.a,{onClick:function(){return f()},size:"small",style:{width:90}},"Reset")))},filterIcon:function(t){return s.a.createElement(c.a,{style:{color:t?"#1890ff":void 0}})}}}},610:function(t,e,n){}}]);