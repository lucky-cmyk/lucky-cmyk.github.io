(this.webpackJsonpruby_rummy_web=this.webpackJsonpruby_rummy_web||[]).push([[54],{1079:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return f}));var a=n(4),r=n.n(a),c=n(8),u=n(159),i=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.jpost("/user-web/create",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.get("/user-web/gets",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.put("/user-web/update-password",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.put("/user-web/update-block",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.put("/user-web/update-role",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.get("/component/gets-by-user-name",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},1195:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return l}));var a=n(159),r=function(e){return a.a.get("/role/gets",e)},c=function(e){return a.a.delete("/role/delete",e)},u=function(e){return a.a.jpost("/role/create",e)},i=function(e){return a.a.put("/role/update",e)},o=function(e){return a.a.get("/permissions/gets",e)},s=function(e){return a.a.get("/role/get-permissions",e)},l=function(e){return a.a.get("/role/get-role-by-user",e)}},1348:function(e,t,n){"use strict";n(4),n(8),n(159)},1564:function(e,t,n){"use strict";n.r(t);n(533);var a=n(534),r=(n(530),n(529)),c=(n(156),n(61)),u=n(4),i=n.n(u),o=n(62),s=n(8),l=n(79),d=n(0),f=n.n(d),p=n(41),b=n(116),m=(n(81),n(553),n(554)),O=(n(1331),n(1337)),j=(n(182),n(80)),v=(n(305),n(82)),h=(n(304),n(157)),k=(n(544),n(543)),y=n(1079),g=n(1195),w=k.a.Option,E=h.a.TextArea,x=Object(d.memo)((function(e){var t=e.onCancel,n=e.visible,a=e.onOk,r=e.perms,c=e.users,u=v.a.useForm(),p=Object(l.a)(u,1)[0],b=Object(d.useState)([]),y=Object(l.a)(b,2),x=y[0],S=y[1],C=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{p.validateFields().then(Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.d)(Object(o.a)(Object(o.a)({},p.getFieldsValue()),{},{permissions_ids:x.toString(),user_ids:null===(t=p.getFieldValue("user_ids"))||void 0===t?void 0:t.toString()}));case 2:p.resetFields(),N([]),j.b.success("\u521b\u5efa\u6210\u529f"),a();case 6:case"end":return e.stop()}}),e)}))))}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=Object(d.useState)([]),F=Object(l.a)(_,2),I=F[0],P=F[1],V=Object(d.useState)([]),z=Object(l.a)(V,2),K=z[0],N=z[1],T=Object(d.useState)([]),q=Object(l.a)(T,2),D=q[0],R=q[1],A=Object(d.useState)(!0),B=Object(l.a)(A,2),J=B[0],M=B[1];return f.a.createElement(m.a,{title:"\u521b\u5efa\u89d2\u8272",visible:n,onCancel:function(){p.resetFields(),N([]),t()},onOk:C},f.a.createElement(v.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:18}},{form:p,name:"form_in_modal",hideRequiredMark:!0}),f.a.createElement(v.a.Item,{label:"\u89d2\u8272\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d"}]},f.a.createElement(h.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d"})),f.a.createElement(v.a.Item,{label:"\u5907\u6ce8",name:"remarks",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}]},f.a.createElement(E,{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"})),f.a.createElement(v.a.Item,{label:"\u6743\u9650",name:"permissions_ids",rules:[function(e){e.getFieldValue;return{validator:function(e,t){return console.log(K),K.length>0?Promise.resolve():Promise.reject(new Error("\u8bf7\u9009\u62e9\u6743\u9650"))}}}]},f.a.createElement(O.a,{checkable:!0,onExpand:function(e){P(e),M(!1)},expandedKeys:I,autoExpandParent:J,onCheck:function(e,t){S(e.concat(t.halfCheckedKeys)),N(e)},checkedKeys:K,onSelect:function(e,t){R(e)},selectedKeys:D,treeData:r})),f.a.createElement(v.a.Item,{label:"\u6240\u5c5e\u7528\u6237",name:"user_ids"},f.a.createElement(k.a,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u7528\u6237",mode:"multiple"},c.map((function(e){return f.a.createElement(w,{key:e.id,value:e.id},e.uname)}))))))})),S=n(90),C=k.a.Option,_=h.a.TextArea,F=Object(d.memo)((function(e){var t=e.onCancel,n=e.visible,a=e.onOk,r=e.perms,c=e.users,u=e.name,p=e.id,b=e.remarks,y=v.a.useForm(),w=Object(l.a)(y,1)[0],E=Object(d.useState)([]),x=Object(l.a)(E,2),F=x[0],I=x[1],P=Object(d.useState)([]),V=Object(l.a)(P,2),z=(V[0],V[1]),K=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{w.validateFields().then(Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.g)(Object(o.a)(Object(o.a)({},w.getFieldsValue()),{},{permissions_ids:F.toString(),user_ids:null===(t=w.getFieldValue("user_ids"))||void 0===t?void 0:t.toString(),id:p}));case 2:w.resetFields(),J([]),j.b.success("\u4fee\u6539\u6210\u529f"),a();case 6:case"end":return e.stop()}}),e)}))))}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=Object(d.useState)([]),T=Object(l.a)(N,2),q=T[0],D=T[1],R=Object(d.useState)([]),A=Object(l.a)(R,2),B=A[0],J=A[1],M=Object(d.useState)([]),H=Object(l.a)(M,2),L=H[0],Y=H[1],G=Object(d.useState)(!0),Q=Object(l.a)(G,2),U=Q[0],W=Q[1],X=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)({role_id:p});case 2:t=e.sent,z((n=t)||[]),w.setFieldsValue({user_ids:n||[]});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.c)({role_id:p});case 2:(t=e.sent)&&(n=Object(S.h)(t,{key:"id",title:"name",children:"child",check:"check",checkState:!0}),J(n),a=Object(S.g)(t,{key:"id",title:"name",children:"child",check:"check",checkState:!0}),I(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){n&&(w.setFieldsValue({name:u,remarks:b}),X(),Z())}),[n]),f.a.createElement(m.a,{title:"\u4fee\u6539\u89d2\u8272",visible:n,onCancel:function(){w.resetFields(),t()},onOk:K},f.a.createElement(v.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:18}},{form:w,name:"form_in_modal",hideRequiredMark:!0}),f.a.createElement(v.a.Item,{label:"\u89d2\u8272\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d"}]},f.a.createElement(h.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d"})),f.a.createElement(v.a.Item,{label:"\u5907\u6ce8",name:"remarks",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}]},f.a.createElement(_,{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"})),f.a.createElement(v.a.Item,{label:"\u6743\u9650",name:"permissions_ids",rules:[function(e){e.getFieldValue;return{validator:function(e,t){return console.log(B),B.length>0?Promise.resolve():Promise.reject(new Error("\u8bf7\u9009\u62e9\u6743\u9650"))}}}]},f.a.createElement(O.a,{checkable:!0,onExpand:function(e){D(e),W(!1)},expandedKeys:q,autoExpandParent:U,onCheck:function(e,t){I(e.concat(t.halfCheckedKeys)),J(e)},checkedKeys:B,onSelect:function(e,t){Y(e)},selectedKeys:L,treeData:r})),f.a.createElement(v.a.Item,{label:"\u6240\u5c5e\u7528\u6237",name:"user_ids",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u7528\u6237"}]},f.a.createElement(k.a,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u7528\u6237",mode:"multiple"},c.map((function(e){return f.a.createElement(C,{key:e.id,value:e.id},e.uname)}))))))})),I=(n(558),n(557)),P=(n(561),n(562)),V=(n(1348),Object(d.forwardRef)((function(e,t){var n=e.handleEdit,a=Object(d.useState)(!1),c=Object(l.a)(a,2),u=c[0],p=c[1],b=Object(d.useState)([]),m=Object(l.a)(b,2),O=m[0],v=m[1],h=(e.modifypassword_h,e.modifyaccountRole_h,e.block_h,e.pageSize),k=void 0===h?10:h,w=e.total,E=void 0===w?20:w,x=(e.showTotal,Object(d.useState)({current:1,pageSize:k||10,total:E||0,showSizeChanger:!0})),C=Object(l.a)(x,2),_=C[0],F=C[1],V=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g.e)({id:t});case 3:j.b.success("\u5220\u9664\u6210\u529f"),(_.total-1)/_.pageSize<_.current&&1!=_.current?F(Object(o.a)(Object(o.a)({},_),{},{current:_.current-1})):K(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),z=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name",key:"id"},{title:"\u89d2\u8272\u8bf4\u660e",dataIndex:"remarks"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created_at"},{title:"\u521b\u5efa\u4eba",dataIndex:"create_user_name"},{title:"\u64cd\u4f5c",dataIndex:"disabled",render:function(e,t){return f.a.createElement(r.b,{size:"middle"},f.a.createElement("a",{onClick:function(){return n(t.name,t.id,t.remarks)}},"\u7f16\u8f91"),f.a.createElement(P.a,{title:"\u786e\u5b9a\u5220\u9664\u8fd9\u6761\u6570\u636e?",onConfirm:function(){return V(t.id)},okText:"Yes",cancelText:"No"},f.a.createElement("a",null,"\u5220\u9664")))}}];Object(d.useImperativeHandle)(t,(function(){return{getData:function(e){K(e)}}}));var K=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,a,r,c,u,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.prev=1,p(!0),e.next=5,Object(g.f)(Object(o.a)({page:_.current,page_size:_.pageSize},t));case 5:if(!((null===(a=e.sent)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.length)>0)){e.next=12;break}return r=Object(S.b)(a.data,{key:"create_user"}),e.next=10,Object(y.c)({user_ids:r.toString()});case 10:(c=e.sent)&&(u=c.data,a.data=Object(S.d)(a.data,{key:"create_user",data:u,trans_key:"create_user_name"}));case 12:v(a.data),p(!1),F(Object(o.a)(Object(o.a)({},_),{},{total:a.total})),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),p(!1),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){K()}),[_.current,_.pageSize]);return f.a.createElement(f.a.Fragment,null,f.a.createElement(I.a,{rowKey:"id",bordered:!0,loading:u,columns:z,dataSource:O,pagination:_,onChange:function(e){F(Object(o.a)({},e))}}))})));t.default=function(e){var t=Object(d.useState)([]),n=Object(l.a)(t,2),u=(n[0],n[1],Object(d.useState)(!1)),o=Object(l.a)(u,2),m=(o[0],o[1],Object(d.useState)(!1)),O=Object(l.a)(m,2),j=(O[0],O[1],Object(d.useState)([])),v=Object(l.a)(j,2),h=(v[0],v[1],Object(d.useState)()),k=Object(l.a)(h,2),w=(k[0],k[1],Object(d.useState)(!1)),E=Object(l.a)(w,2),S=E[0],C=E[1],_=Object(d.useState)(!1),I=Object(l.a)(_,2),P=I[0],z=I[1],K=Object(d.useState)(""),N=Object(l.a)(K,2),T=N[0],q=N[1],D=Object(d.useState)(""),R=Object(l.a)(D,2),A=R[0],B=R[1],J=Object(d.useState)(""),M=Object(l.a)(J,2),H=M[0],L=M[1],Y=Object(d.useState)(""),G=Object(l.a)(Y,2),Q=G[0],U=G[1],W=Object(d.useState)([]),X=Object(l.a)(W,2),Z=X[0],$=X[1],ee=Object(d.useRef)(),te=Object(p.c)((function(e){return e.appids}));Object(d.useEffect)((function(){}),[te]);var ne=function e(t,n){var a=[],r=n.key,c=n.title,u=n.children;return t.map((function(t){a.push({key:t[r],title:t[c],children:t[u]?e(t[u],n):[]})})),a},ae=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.b)();case 2:t=e.sent,n=ne(t,{key:"id",title:"name",children:"child"}),U(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)({page:1,page_size:1e4});case 2:t=e.sent,$(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){ae(),re()}),[]),f.a.createElement(b.a,{title:e.route.title},f.a.createElement(r.b,null,f.a.createElement(c.a,{type:"primary",onClick:function(){C(!0)}},"\u521b\u5efa\u89d2\u8272")),f.a.createElement(a.a,{dashed:!0}),f.a.createElement(V,{ref:ee,handleEdit:function(e,t,n){!function(e,t,n){B(e),q(t),L(n)}(e,t,n),z(!0)}}),f.a.createElement(x,{onOk:function(){ee.current.getData(),C(!1)},visible:S,onCancel:function(){C(!1)},perms:Q,users:Z}),f.a.createElement(F,{perms:Q,users:Z,id:T,name:A,remarks:H,visible:P,onOk:function(){ee.current.getData(),z(!1)},onCancel:function(){z(!1)}}))}},555:function(e,t,n){"use strict";n(46),n(566)},560:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return e?"function"===typeof e?e():e:null}},561:function(e,t,n){"use strict";n(46),n(555),n(156),n(567)},562:function(e,t,n){"use strict";var a=n(2),r=n(7),c=n(0),u=n(6),i=n.n(u),o=n(32),s=n(87),l=n(16),d=n(117),f=n(61),p=n(185),b=n(84),m=n(68),O=n(54),j=n(560),v=n(21),h=n(118),k=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},y=c.forwardRef((function(e,t){var n=Object(o.a)(!1,{value:e.visible,defaultValue:e.defaultVisible}),u=Object(r.a)(n,2),s=u[0],y=u[1],g=function(t,n){var a;y(t),null===(a=e.onVisibleChange)||void 0===a||a.call(e,t,n)},w=function(t){var n;g(!1,t),null===(n=e.onConfirm)||void 0===n||n.call(void 0,t)},E=function(t){var n;g(!1,t),null===(n=e.onCancel)||void 0===n||n.call(void 0,t)},x=c.useContext(O.b).getPrefixCls,S=e.prefixCls,C=e.placement,_=e.children,F=e.overlayClassName,I=k(e,["prefixCls","placement","children","overlayClassName"]),P=x("popover",S),V=x("popconfirm",S),z=i()(V,F),K=c.createElement(b.a,{componentName:"Popconfirm",defaultLocale:m.a.Popconfirm},(function(t){return function(t,n){var r=e.okButtonProps,u=e.cancelButtonProps,i=e.title,o=e.cancelText,s=e.okText,l=e.okType,d=e.icon;return c.createElement("div",{className:"".concat(t,"-inner-content")},c.createElement("div",{className:"".concat(t,"-message")},d,c.createElement("div",{className:"".concat(t,"-message-title")},Object(j.a)(i))),c.createElement("div",{className:"".concat(t,"-buttons")},c.createElement(f.a,Object(a.a)({onClick:E,size:"small"},u),o||n.cancelText),c.createElement(f.a,Object(a.a)({onClick:w},Object(p.a)(l),{size:"small"},r),s||n.okText)))}(P,t)})),N=x();return c.createElement(d.a,Object(a.a)({},I,{prefixCls:P,placement:C,onVisibleChange:function(t){e.disabled||g(t)},visible:s,overlay:K,overlayClassName:z,ref:t,transitionName:Object(h.b)(N,"zoom-big",e.transitionName)}),Object(v.a)(_,{onKeyDown:function(e){var t,n;c.isValidElement(_)&&(null===(n=null===_||void 0===_?void 0:(t=_.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===l.a.ESC&&s&&g(!1,e)}(e)}}))}));y.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:c.createElement(s.a,null),disabled:!1},t.a=y},566:function(e,t,n){},567:function(e,t,n){}}]);