(this.webpackJsonpruby_rummy_web=this.webpackJsonpruby_rummy_web||[]).push([[60],{1631:function(e,t,a){"use strict";a.r(t);a(547);var n=a(546),r=(a(522),a(523)),i=(a(519),a(518)),l=(a(1351),a(1357)),c=(a(533),a(532)),o=a(72),u=a(605),s=(a(173),a(110)),p=a(3),d=a.n(p),m=a(9),f=a(84),b=a(0),g=a.n(b),v=a(85),y=a.n(v),h=a(10),O=a(111),j=a(280),E=a(91),S=a.n(E),w=a(51),x=(a(614),j.a.RangePicker),z={13011:"\u5173\u952e\u6307\u6807",13012:"\u65b0\u7528\u6237\u4ed8\u8d39",13013:"\u7528\u6237\u6d3b\u8dc3",13014:"\u7528\u6237\u7559\u5b58",13015:"\u6e38\u620f\u5c40\u6570",13016:"point\u673a\u5668\u4eba\u5c40\u6570",13017:"pool\u673a\u5668\u4eba\u5c40\u6570",13018:"10card\u673a\u5668\u4eba\u5c40\u6570",13019:"\u7528\u6237\u4ed8\u8d39"};t.default=function(e){var t=[y()().subtract(15,"day"),y()()],a=[t[0].format("YYYY-MM-DD"),t[1].format("YYYY-MM-DD")],p=e.match,v=Object(b.useState)(0|p.params.id),j=Object(f.a)(v,2),E=j[0],C=j[1],k=Object(b.useState)(!1),Y=Object(f.a)(k,2),I=Y[0],P=Y[1],D=Object(b.useState)([]),N=Object(f.a)(D,2),M=N[0],_=N[1],A=Object(b.useState)([]),T=Object(f.a)(A,2),V=T[0],F=T[1],R=Object(b.useState)(a),B=Object(f.a)(R,2),J=B[0],L=B[1],W=Object(b.useState)(t),q=Object(f.a)(W,2),G=q[0],H=q[1],K=Object(b.useState)(),Q=Object(f.a)(K,2),U=Q[0],X=Q[1],Z=Object(w.c)((function(e){return e.appids})),$=Object(b.useState)(20),ee=Object(f.a)($,2),te=(ee[0],ee[1],Object(b.useState)({})),ae=Object(f.a)(te,2),ne=ae[0],re=ae[1],ie=Object(b.useState)({pagination:{current:1,pageSize:20,total:1e4},loading:!1}),le=Object(f.a)(ie,2),ce=le[0],oe=le[1],ue=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(m.a)(d.a.mark((function e(){var t,a,n,r,i,l,c,p,m,f=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},P(!0),e.next=4,h.a.get("/crux/statistics/"+E,{params:t,paramsSerializer:function(e){return S.a.stringify(e,{arrayFormat:"repeat"})}});case 4:if(a=e.sent,console.log(a),0===a.code){e.next=10;break}return s.b.error("select failed\uff01"),P(!1),e.abrupt("return");case 10:n=a.data,r=[],i=Object(u.a)(n.column);try{for(i.s();!(l=i.n()).done;)c=l.value,p={title:c.title,dataIndex:c.id,key:c.id},r.push(p)}catch(d){i.e(d)}finally{i.f()}_([].concat([{title:"Time",dataIndex:"date",key:"date"}],r)),m=n.data,oe(Object(o.a)(Object(o.a)({},ce),{},{loading:!1,pagination:{current:t.page,pageSize:t.pageSize,total:n.total}})),F(m),P(!1);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(m.a)(d.a.mark((function e(t,a,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se(Object(o.a)(Object(o.a)({},ne),{},{startTime:J[0],endTime:J[1],appid:U,page:t.current,pageSize:t.pageSize}));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();Object(b.useEffect)((function(){null!=U&&se(Object(o.a)(Object(o.a)({},ne),{},{startTime:J[0],endTime:J[1],appid:U,page:ce.pagination.current,pageSize:ce.pagination.pageSize}))}),[E,J,U,ne]),Object(b.useEffect)((function(){re({}),C(0|p.params.id)}),[p.params.id]);var de=[{value:"0",label:"\u5168\u90e8"},{value:"2",label:"2\u4eba"},{value:"6",label:"6\u4eba"}],me=[{value:"0",label:"\u5168\u90e8",children:de},{value:"101",label:"101 Pool",children:de},{value:"201",label:"201 Pool",children:de}];return g.a.createElement(O.a,{title:z[E]},g.a.createElement(i.b,null,g.a.createElement("div",{style:{padding:"10px 0"}},g.a.createElement(c.a,{defaultValue:"Choose a channel...",style:{width:300},onChange:function(e){return ue(e)},loading:Z.length<1},g.a.createElement(c.a.Option,{key:0,value:1},"\u5168\u90e8"),Z.map((function(e){return g.a.createElement(c.a.Option,{key:e.id,value:e.appid},e.appName)})))),"\u65e5\u671f\uff1a",g.a.createElement(x,{disabledDate:function(e){if(!G||0===G.length)return!1;var t=G[0]&&e.diff(G[0],"days")>=31;return G[1]&&G[1].diff(e,"days")>=31||t},defaultValue:t,format:"YYYY-MM-DD",onChange:function(e,t){return L(t)},onCalendarChange:function(e){return H(e)}}),[13016,13018].includes(0|E)&&g.a.createElement(g.a.Fragment,null,"\u7edf\u8ba1\u7c7b\u578b\uff1a",g.a.createElement(c.a,{defaultValue:ne.player||1,style:{width:150},onChange:function(e){return re({player:parseInt(e)})}},g.a.createElement(c.a.Option,{value:1},"\u5168\u90e8"),g.a.createElement(c.a.Option,{value:2},"2\u4eba"),g.a.createElement(c.a.Option,{value:3},"6\u4eba")),"\xa0\xa0\xa0\xa0"),[13013,13015].includes(0|E)&&g.a.createElement(g.a.Fragment,null,"\u7edf\u8ba1\u7c7b\u578b\uff1a",g.a.createElement(c.a,{defaultValue:ne.pool_type||1,style:{width:150},onChange:function(e){return re({pool_type:parseInt(e)})}},g.a.createElement(c.a.Option,{value:1},"\u6240\u6709"),g.a.createElement(c.a.Option,{value:2},"Points Rummy"),g.a.createElement(c.a.Option,{value:3},"Pool Rummy"),g.a.createElement(c.a.Option,{value:4},"10 Card")),"\xa0\xa0\xa0\xa0"),[13017].includes(0|E)&&g.a.createElement(g.a.Fragment,null,"\u7edf\u8ba1\u7c7b\u578b\uff1a",g.a.createElement(l.a,{defaultValue:["0","0"],options:me,onChange:function(e){!Array.isArray(e)||e.length<2||re({room_type:e})}}),"\xa0\xa0\xa0\xa0")),g.a.createElement(r.a,null),g.a.createElement(n.a,{bordered:!0,scroll:{x:!0},loading:I,pagination:ce.pagination,onChange:pe,columns:M,dataSource:V}))}},518:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(6),r=a.n(n),i=a(5),l=a.n(i),c=a(16),o=a.n(c),u=a(0),s=a(4),p=a.n(s),d=a(63),m=a(123);function f(e){var t=e.className,a=e.direction,n=e.index,i=e.marginDirection,c=e.children,o=e.split,s=e.wrap,p=u.useContext(g),d=p.horizontalSize,m=p.verticalSize,f=p.latestIndex,b={};return"vertical"===a?n<f&&(b={marginBottom:d/(o?2:1)}):b=r()(r()({},n<f&&l()({},i,d/(o?2:1))),s&&{paddingBottom:m}),null===c||void 0===c?null:u.createElement(u.Fragment,null,u.createElement("div",{className:t,style:b},c),n<f&&o&&u.createElement("span",{className:"".concat(t,"-split"),style:b},o))}var b=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},g=u.createContext({latestIndex:0,horizontalSize:0,verticalSize:0}),v={small:8,middle:16,large:24};t.b=function(e){var t,a=u.useContext(m.b),n=a.getPrefixCls,i=a.space,c=a.direction,s=e.size,y=void 0===s?(null===i||void 0===i?void 0:i.size)||"small":s,h=e.align,O=e.className,j=e.children,E=e.direction,S=void 0===E?"horizontal":E,w=e.prefixCls,x=e.split,z=e.style,C=e.wrap,k=void 0!==C&&C,Y=b(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),I=u.useMemo((function(){return(Array.isArray(y)?y:[y,y]).map((function(e){return function(e){return"string"===typeof e?v[e]:e||0}(e)}))}),[y]),P=o()(I,2),D=P[0],N=P[1],M=Object(d.a)(j,{keepEmpty:!0});if(0===M.length)return null;var _=void 0===h&&"horizontal"===S?"center":h,A=n("space",w),T=p()(A,"".concat(A,"-").concat(S),(t={},l()(t,"".concat(A,"-rtl"),"rtl"===c),l()(t,"".concat(A,"-align-").concat(_),_),t),O),V="".concat(A,"-item"),F="rtl"===c?"marginLeft":"marginRight",R=0,B=M.map((function(e,t){return null!==e&&void 0!==e&&(R=t),u.createElement(f,{className:V,key:"".concat(V,"-").concat(t),direction:S,index:t,marginDirection:F,split:x,wrap:k},e)}));return u.createElement("div",r()({className:T,style:r()(r()({},k&&{flexWrap:"wrap",marginBottom:-N}),z)},Y),u.createElement(g.Provider,{value:{horizontalSize:D,verticalSize:N,latestIndex:R}},B))}},519:function(e,t,a){"use strict";a(55),a(599)},599:function(e,t,a){},605:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(175);function r(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(n.a)(e))){var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,l=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw i}}}}},614:function(e,t,a){"use strict";a(533);var n=a(532),r=a(0),i=a.n(r),l=a(51),c=n.a.Option;t.a=function(e){var t=e.handleChange,a=Object(l.c)((function(e){return e.appids}));return i.a.createElement("div",{style:{padding:"10px 0"}},i.a.createElement(n.a,{defaultValue:"Choose a channel...",style:{width:300},onChange:t,loading:a.length<1},a.map((function(e){return i.a.createElement(c,{key:e.id,value:e.appid},e.appName)}))))}}}]);