(this.webpackJsonpruby_rummy_web=this.webpackJsonpruby_rummy_web||[]).push([[68],{1181:function(e,t,n){"use strict";var a;function r(e){if("undefined"===typeof document)return 0;if(e||void 0===a){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),r=n.style;r.position="absolute",r.top=0,r.left=0,r.pointerEvents="none",r.visibility="hidden",r.width="200px",r.height="150px",r.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var c=t.offsetWidth;n.style.overflow="scroll";var o=t.offsetWidth;c===o&&(o=n.clientWidth),document.body.removeChild(n),a=c-o}return a}n.d(t,"a",(function(){return r}))},1582:function(e,t,n){"use strict";n.r(t);n(530);var a=n(529),r=(n(156),n(61)),c=n(211),o=n(62),i=n(617),l=n(4),u=n.n(l),d=n(8),s=n(79),f=n(0),p=n.n(f),v=n(116),m=n(625),b=(n(308),n(208)),h=(n(304),n(157)),g=(n(182),n(80)),y=(n(553),n(554)),E=n(129),O=n(198),j=n(290),k=n(85),x=y.a.confirm;var C=function(e){var t=e.index,n=e.data,c=e.handler,i=e.del,l=e.appid,s={name:"",code:"",act:"",size:""},f=function(e,a,r){var o=n.stage.slice(0);o[a][r]=e.target.value,c(e,[t,"stage"],o)};return p.a.createElement(b.a,{size:"small",style:{marginTop:16},extra:p.a.createElement(a.b,null,p.a.createElement(r.a,{shape:"circle",icon:p.a.createElement(O.a,null),onClick:function(){x({title:"Sure to Delete the config?",icon:p.a.createElement(E.a,null),okText:"Confirm",okType:"danger",cancelText:"Cancel",onOk:function(){return Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.id){e.next=7;break}return e.next=3,Object(k.P)({id:n.id});case 3:0===(a=e.sent).code?i(t):g.b.error(a.err),e.next=8;break;case 7:i(t);case 8:case"end":return e.stop()}}),e)})))()}})}}),p.a.createElement(r.a,{shape:"circle",icon:p.a.createElement(j.a,null),onClick:function(){return function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.vers&&(n.vers[n.ver]=n.forced),!n.id){e.next=10;break}return t=Object(o.a)({},n),e.next=5,Object(k.W)(l,t);case 5:a=e.sent,console.log("\u4fee\u6539\u7ed3\u679c\uff1a",a),0!==a.code&&g.b.error(a.err),e.next=14;break;case 10:return e.next=12,Object(k.B)(l,n);case 12:r=e.sent,console.log(r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}x({title:"Sure to save and sync the config?",icon:p.a.createElement(E.a,null),okText:"Confirm",okType:"danger",cancelText:"Cancel",onOk:function(){return e.apply(this,arguments)}})}()}}))},p.a.createElement(a.b,{direction:"vertical"},p.a.createElement(h.a,{addonBefore:"versioncode",value:n.versioncode,style:{width:200},onChange:function(e){return c(e,[t,"versioncode"],e.target.value)}}),p.a.createElement(h.a,{addonBefore:"ver",value:n.ver,style:{width:200},onChange:function(e){return c(e,[t,"ver"],e.target.value)}}),p.a.createElement("div",null,"stage:"),p.a.createElement(r.a,{type:"dashed",onClick:function(e){return function(e){var a=n.stage.slice(0);a.splice(a.length,0,Object(o.a)({},s)),c(e,[t,"stage"],a)}(e)}},"Add Stage"),n.stage.map((function(e,o){return p.a.createElement(a.b,{direction:"horizontal",key:o},p.a.createElement(h.a,{addonBefore:"name",value:e.name,onChange:function(e){return f(e,o,"name")}}),p.a.createElement(h.a,{addonBefore:"code",value:e.code,onChange:function(e){return f(e,o,"code")}}),p.a.createElement(h.a,{addonBefore:"act",value:e.act,onChange:function(e){return f(e,o,"act")}}),p.a.createElement(h.a,{addonBefore:"size",value:e.size,onChange:function(e){return f(e,o,"size")}}),p.a.createElement(r.a,{type:"dashed",onClick:function(e){return function(e,a){var r=n.stage.slice(0);r.splice(a,1),c(e,[t,"stage"],r)}(e,o)}},"Deletet"))})),p.a.createElement(h.a,{addonBefore:"url",value:n.url,size:"large",onChange:function(e){return c(e,[t,"url"],e.target.value)}})))};t.default=function(e){var t={id:0,versioncode:"",ver:"",stage:[],url:""},n=Object(f.useState)([]),l=Object(s.a)(n,2),b=l[0],h=l[1],g=Object(f.useState)(),y=Object(s.a)(g,2),E=y[0],O=y[1],j=Object(f.useState)(!0),x=Object(s.a)(j,2),w=x[0],S=x[1],B=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=8;break}return S(!1),console.log("\u8bf7\u6c42\u70ed\u66f4\u6570\u636e\uff1a",t),e.next=5,Object(k.qb)({appid:t});case 5:n=e.sent,console.log("\u70ed\u66f4\u5217\u8868\uff1a",n.data),n.data?h(n.data):h([]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(f.useEffect)((function(){B(E)}),[E]);var T=function(e){var t=b.slice(0);t.splice(parseInt(e),1),h(t)},z=function(e,t,n){e.persist&&e.persist();var a=Object(i.a)(b);a[t[0]]=Object(o.a)(Object(o.a)({},a[t[0]]),{},Object(c.a)({},t[1],n)),h(a)};return p.a.createElement(v.a,{title:"Hot update"},p.a.createElement(m.a,{handleChange:function(e){O(e)}}),p.a.createElement(a.b,{direction:"vertical"},b.map((function(e,t){return p.a.createElement(C,{key:t,index:t,data:e,appid:E,handler:z,del:T})})),p.a.createElement(r.a,{type:"primary",disabled:w,onClick:function(){h([].concat(Object(i.a)(b),[Object(o.a)({},t)]))}},"Add")))}},617:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(160);var r=n(184);function c(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},625:function(e,t,n){"use strict";n(544);var a=n(543),r=n(0),c=n.n(r),o=n(41),i=a.a.Option;t.a=function(e){var t=e.handleChange,n=Object(o.c)((function(e){return e.appids}));return c.a.createElement("div",{style:{padding:"10px 0"}},c.a.createElement(a.a,{defaultValue:"Choose a channel...",style:{width:300},onChange:t,loading:n.length<1},n.map((function(e){return c.a.createElement(i,{key:e.id,value:e.appid},e.appName)}))))}}}]);